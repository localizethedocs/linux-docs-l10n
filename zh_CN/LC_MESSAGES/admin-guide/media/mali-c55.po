# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel master\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2026-01-12 08:28+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../admin-guide/media/mali-c55.rst:5
msgid "ARM Mali-C55 Image Signal Processor driver"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:8
msgid "Introduction"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:10
msgid ""
"This file documents the driver for ARM's Mali-C55 Image Signal Processor. "
"The driver is located under drivers/media/platform/arm/mali-c55."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:13
msgid ""
"The Mali-C55 ISP receives data in either raw Bayer format or RGB/YUV format "
"from sensors through either a parallel interface or a memory bus before "
"processing it and outputting it through an internal DMA engine. Two output "
"pipelines are possible (though one may not be fitted, depending on the "
"implementation). These are referred to as \"Full resolution\" and "
"\"Downscale\", but the naming is historic and both pipes are capable of "
"cropping/scaling operations. The full resolution pipe is also capable of "
"outputting RAW data, bypassing much of the ISP's processing. The downscale "
"pipe cannot output RAW data. An integrated test pattern generator can be "
"used to drive the ISP and produce image data in the absence of a connected "
"camera sensor. The driver module is named mali_c55, and is enabled through "
"the CONFIG_VIDEO_MALI_C55 config option."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:25
msgid ""
"The driver implements V4L2, Media Controller and V4L2 Subdevice interfaces "
"and expects camera sensors connected to the ISP to have V4L2 subdevice "
"interfaces."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:29
msgid "Mali-C55 ISP hardware"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:31
msgid ""
"A high level functional view of the Mali-C55 ISP is presented below. The ISP "
"takes input from either a live source or through a DMA engine for memory "
"input, depending on the SoC integration.::"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:52
msgid "Media Controller Topology"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:54
msgid ""
"An example of the ISP's topology (as implemented in a system with an IMX415 "
"camera sensor and generic CSI-2 receiver) is below:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:58
msgid "mali-c55-graph.dot"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:62
msgid "The driver has 4 V4L2 subdevices:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:64
msgid "`mali_c55 isp`: Responsible for configuring input crop and color space"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:65
msgid "conversion"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:66
msgid "`mali_c55 tpg`: The test pattern generator, emulating a camera sensor."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:67
msgid "`mali_c55 resizer fr`: The Full-Resolution pipe resizer"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:68
msgid "`mali_c55 resizer ds`: The Downscale pipe resizer"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:70
msgid "The driver has 3 V4L2 video devices:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:72
msgid "`mali-c55 fr`: The full-resolution pipe's capture device"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:73
msgid "`mali-c55 ds`: The downscale pipe's capture device"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:74
msgid "`mali-c55 3a stats`: The 3A statistics capture device"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:76
msgid ""
"Frame sequences are synchronised across to two capture devices, meaning if "
"one pipe is started later than the other the sequence numbers returned in "
"its buffers will match those of the other pipe rather than starting from "
"zero."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:81
msgid "Idiosyncrasies"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:83
msgid ""
"**mali-c55 isp** The `mali-c55 isp` subdevice has a single sink pad to which "
"all sources of data should be connected. The active source is selected by "
"enabling the appropriate media link and disabling all others. The ISP has "
"two source pads, reflecting the different paths through which it can "
"internally route data. Tap points within the ISP allow users to divert data "
"to avoid processing by some or all of the hardware's processing steps. The "
"diagram below is intended only to highlight how the bypassing works and is "
"not a true reflection of those processing steps; for a high-level functional "
"block diagram see ARM's developer page for the ISP [3]_::"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:111
#: ../../../admin-guide/media/mali-c55.rst:138
msgid "Pad"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:112
#: ../../../admin-guide/media/mali-c55.rst:139
msgid "Direction"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:113
#: ../../../admin-guide/media/mali-c55.rst:140
#: ../../../admin-guide/media/mali-c55.rst:162
msgid "Purpose"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:115
#: ../../../admin-guide/media/mali-c55.rst:142
#: ../../../admin-guide/media/mali-c55.rst:164
msgid "0"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:116
#: ../../../admin-guide/media/mali-c55.rst:143
#: ../../../admin-guide/media/mali-c55.rst:151
msgid "sink"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:117
msgid "Data input, connected to the TPG and camera sensors"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:119
#: ../../../admin-guide/media/mali-c55.rst:146
#: ../../../admin-guide/media/mali-c55.rst:165
#: ../../../admin-guide/media/mali-c55.rst:169
msgid "1"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:120
#: ../../../admin-guide/media/mali-c55.rst:124
#: ../../../admin-guide/media/mali-c55.rst:147
msgid "source"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:121
msgid "RGB/YUV data, connected to the FR and DS V4L2 subdevices"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:123
#: ../../../admin-guide/media/mali-c55.rst:150
#: ../../../admin-guide/media/mali-c55.rst:168
msgid "2"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:125
msgid "RAW bayer data, connected to the FR V4L2 subdevices"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:127
msgid ""
"The ISP is limited to both input and output resolutions between 640x480 and "
"8192x8192, and this is reflected in the ISP and resizer subdevice's ."
"set_fmt() operations."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:131
msgid ""
"**mali-c55 resizer fr** The `mali-c55 resizer fr` subdevice has two _sink_ "
"pads to reflect the different insertion points in the hardware (either RAW "
"or demosaiced data):"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:144
msgid "Data input connected to the ISP's demosaiced stream."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:148
msgid "Data output connected to the capture video device"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:152
msgid "Data input connected to the ISP's raw data stream"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:154
msgid ""
"The data source in use is selected through the routing API; two routes each "
"of a single stream are available:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:160
msgid "Sink Pad"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:161
msgid "Source Pad"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:166
msgid "Demosaiced data route"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:170
msgid "Raw data route"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:173
msgid ""
"If the demosaiced route is active then the FR pipe is only capable of output "
"in RGB/YUV formats. If the raw route is active then the output reflects the "
"input (which may be either Bayer or RGB/YUV data)."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:178
msgid "Using the driver to capture video"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:180
msgid ""
"Using the media controller APIs we can configure the input source and ISP to "
"capture images in a variety of formats. In the examples below, configuring "
"the media graph is done with the v4l-utils [1]_ package's media-ctl utility. "
"Capturing the images is done with yavta [2]_."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:186
msgid "Configuring the input source"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:188
msgid ""
"The first step is to set the input source that we wish by enabling the "
"correct media link. Using the example topology above, we can select the TPG "
"as follows:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:197
msgid "Configuring which video devices will stream data"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:199
msgid ""
"The driver will wait for all video devices to have their VIDIOC_STREAMON "
"ioctl called before it tells the sensor to start streaming. To facilitate "
"this we need to enable links to the video devices that we want to use. In "
"the example below we enable the links to both of the image capture video "
"devices"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:210
msgid "Capturing bayer data from the source and processing to RGB/YUV"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:212
msgid ""
"To capture 1920x1080 bayer data from the source and push it through the "
"ISP's full processing pipeline, we configure the data formats appropriately "
"on the source, ISP and resizer subdevices and set the FR resizer's routing "
"to select processed data. The media bus format on the resizer's source pad "
"will be either RGB121212_1X36 or YUV10_1X30, depending on whether you want "
"to capture RGB or YUV. The ISP's debayering block outputs RGB data natively, "
"setting the source pad format to YUV10_1X30 enables the colour space "
"conversion block."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:220
msgid ""
"In this example we target RGB565 output, so select RGB121212_1X36 as the "
"resizer source pad's format:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:236
msgid ""
"The downscale output can also be used to stream data at the same time. In "
"this case since only processed data can be captured through the downscale "
"output no routing need be set:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:245
msgid ""
"Following which images can be captured from both the FR and DS output's "
"video devices (simultaneously, if desired):"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:254
msgid "Cropping the image"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:256
msgid ""
"Both the full resolution and downscale pipes can crop to a minimum "
"resolution of 640x480. To crop the image simply configure the resizer's sink "
"pad's crop and compose rectangles and set the format on the video device:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:267
msgid "Downscaling the image"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:269
msgid ""
"Both the full resolution and downscale pipes can downscale the image by up "
"to 8x provided the minimum 640x480 output resolution is adhered to. For the "
"best image result the scaling ratio for each direction should be the same. "
"To configure scaling we use the compose rectangle on the resizer's sink pad:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:281
msgid "Capturing images in YUV formats"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:283
msgid ""
"If we need to output YUV data rather than RGB the color space conversion "
"block needs to be active, which is achieved by setting "
"MEDIA_BUS_FMT_YUV10_1X30 on the resizer's source pad. We can then configure "
"a capture format like NV12 (here in its multi-planar variant)"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:294
msgid "Capturing RGB data from the source and processing it with the resizers"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:296
msgid ""
"The Mali-C55 ISP can work with sensors capable of outputting RGB data. In "
"this case although none of the image quality blocks would be used it can "
"still crop/scale the data in the usual way. For this reason RGB data input "
"to the ISP still goes through the ISP subdevice's pad 1 to the resizer."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:301
msgid ""
"To achieve this, the ISP's sink pad's format is set to "
"MEDIA_BUS_FMT_RGB202020_1X60 - this reflects the format that data must be in "
"to work with the ISP. Converting the camera sensor's output to that format "
"is the responsibility of external hardware."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:306
msgid ""
"In this example we ask the test pattern generator to give us RGB data "
"instead of bayer."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:314
msgid ""
"Cropping or scaling the data can be done in exactly the same way as outlined "
"earlier."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:318
msgid "Capturing raw data from the source and outputting it unmodified"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:320
msgid ""
"The ISP can additionally capture raw data from the source and output it on "
"the full resolution pipe only, completely unmodified. In this case the "
"downscale pipe can still process the data normally and be used at the same "
"time."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:324
msgid ""
"To configure raw bypass the FR resizer's subdevice's routing table needs to "
"be configured, followed by formats in the appropriate places:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:340
msgid "Capturing ISP Statistics"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:342
msgid ""
"The ISP is capable of producing statistics for consumption by image "
"processing algorithms running in userspace. These statistics can be captured "
"by queueing buffers to the `mali-c55 3a stats` V4L2 Device whilst the ISP is "
"streaming. Only the :ref:`V4L2_META_FMT_MALI_C55_STATS <v4l2-meta-fmt-mali-"
"c55-stats>` format is supported, so no format-setting need be done:"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:357
msgid ""
"The layout of the buffer is described by :c:type:`mali_c55_stats_buffer`, "
"but broadly statistics are generated to support three image processing "
"algorithms; AEXP (Auto-Exposure), AWB (Auto-White Balance) and AF (Auto-"
"Focus). These stats can be drawn from various places in the Mali C55 ISP "
"pipeline, known as \"tap points\". This high-level block diagram is intended "
"to explain where in the processing flow the statistics can be drawn from::"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:390
msgid ""
"By default all statistics are drawn from the 0th tap point for each "
"algorithm; I.E. AEXP statistics from AEXP-0 (A), AWB statistics from AWB-0 "
"and AF statistics from AF-0. This is configurable for AEXP and AWB "
"statsistics through programming the ISP's parameters."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:398
msgid "Programming ISP Parameters"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:400
msgid ""
"The ISP can be programmed with various parameters from userspace to apply to "
"the hardware before and during video stream. This allows userspace to "
"dynamically change values such as black level, white balance and lens "
"shading gains and so on."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:405
msgid ""
"The buffer format and how to populate it are described by the :ref:"
"`V4L2_META_FMT_MALI_C55_PARAMS <v4l2-meta-fmt-mali-c55-params>` format, "
"which should be set as the data format for the `mali-c55 3a params` video "
"node."
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:410
msgid "References"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:411
msgid "https://git.linuxtv.org/v4l-utils.git/"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:412
msgid "https://git.ideasonboard.org/yavta.git"
msgstr ""

#: ../../../admin-guide/media/mali-c55.rst:413
msgid "https://developer.arm.com/Processors/Mali-C55"
msgstr ""
