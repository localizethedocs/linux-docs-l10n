# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-30 08:40+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../edac/scrub.rst:5
msgid "Scrub Control"
msgstr ""

#: ../../../edac/scrub.rst:7
msgid "Copyright (c) 2024-2025 HiSilicon Limited."
msgstr ""

#: ../../../edac/scrub.rst:0
msgid "Author"
msgstr ""

#: ../../../edac/scrub.rst:9
msgid "Shiju Jose <shiju.jose@huawei.com>"
msgstr ""

#: ../../../edac/scrub.rst:0
msgid "License"
msgstr ""

#: ../../../edac/scrub.rst:10
msgid ""
"The GNU Free Documentation License, Version 1.2 without Invariant Sections, "
"Front-Cover Texts nor Back-Cover Texts. (dual licensed under the GPL v2)"
msgstr ""

#: ../../../edac/scrub.rst:14
msgid "Written for: 6.15"
msgstr ""

#: ../../../edac/scrub.rst:17
msgid "Introduction"
msgstr ""

#: ../../../edac/scrub.rst:19
msgid ""
"Increasing DRAM size and cost have made memory subsystem reliability an "
"important concern. These modules are used where potentially corrupted data "
"could cause expensive or fatal issues. Memory errors are among the top "
"hardware failures that cause server and workload crashes."
msgstr ""

#: ../../../edac/scrub.rst:24
msgid ""
"Memory scrubbing is a feature where an ECC (Error-Correcting Code) engine "
"reads data from each memory media location, corrects if necessary and writes "
"the corrected data back to the same memory media location."
msgstr ""

#: ../../../edac/scrub.rst:28
msgid ""
"DIMMs can be scrubbed at a configurable rate to detect uncorrected memory "
"errors and attempt recovery from detected errors, providing the following "
"benefits:"
msgstr ""

#: ../../../edac/scrub.rst:32
msgid ""
"Proactively scrubbing DIMMs reduces the chance of a correctable error "
"becoming uncorrectable."
msgstr ""

#: ../../../edac/scrub.rst:35
msgid ""
"When detected, uncorrected errors caught in unallocated memory pages are "
"isolated and prevented from being allocated to an application or the OS."
msgstr ""

#: ../../../edac/scrub.rst:38
msgid ""
"This reduces the likelihood of software or hardware products encountering "
"memory errors."
msgstr ""

#: ../../../edac/scrub.rst:41
msgid ""
"The additional data on failures in memory may be used to build up statistics "
"that are later used to decide whether to use memory repair technologies such "
"as Post Package Repair or Sparing."
msgstr ""

#: ../../../edac/scrub.rst:45
msgid "There are 2 types of memory scrubbing:"
msgstr ""

#: ../../../edac/scrub.rst:47
msgid "Background (patrol) scrubbing while the DRAM is otherwise idle."
msgstr ""

#: ../../../edac/scrub.rst:49
msgid "On-demand scrubbing for a specific address range or region of memory."
msgstr ""

#: ../../../edac/scrub.rst:51
msgid ""
"Several types of interfaces to hardware memory scrubbers have been "
"identified, such as CXL memory device patrol scrub, CXL DDR5 ECS, ACPI RAS2 "
"memory scrubbing, and ACPI NVDIMM ARS (Address Range Scrub)."
msgstr ""

#: ../../../edac/scrub.rst:55
msgid ""
"The control mechanisms vary across different memory scrubbers. To enable "
"standardized userspace tooling, there is a need to present these controls "
"through a standardized ABI."
msgstr ""

#: ../../../edac/scrub.rst:59
msgid ""
"A generic memory EDAC scrub control allows users to manage underlying "
"scrubbers in the system through a standardized sysfs control interface.  It "
"abstracts the management of various scrubbing functionalities into a unified "
"set of functions."
msgstr ""

#: ../../../edac/scrub.rst:65
msgid "Use cases of common scrub control feature"
msgstr ""

#: ../../../edac/scrub.rst:67
msgid ""
"Several types of interfaces for hardware memory scrubbers have been "
"identified, including the CXL memory device patrol scrub, CXL DDR5 ECS, ACPI "
"RAS2 memory scrubbing features, ACPI NVDIMM ARS (Address Range Scrub), and "
"software-based memory scrubbers."
msgstr ""

#: ../../../edac/scrub.rst:72
msgid ""
"Of the identified interfaces to hardware memory scrubbers some support "
"control over patrol (background) scrubbing (e.g., ACPI RAS2, CXL) and/or on-"
"demand scrubbing (e.g., ACPI RAS2, ACPI ARS). However, the scrub control "
"interfaces vary between memory scrubbers, highlighting the need for a "
"standardized, generic sysfs scrub control interface that is accessible to "
"userspace for administration and use by scripts/tools."
msgstr ""

#: ../../../edac/scrub.rst:79
msgid ""
"User-space scrub controls allow users to disable scrubbing if necessary, for "
"example, to disable background patrol scrubbing or adjust the scrub rate for "
"performance-aware operations where background activities need to be "
"minimized or disabled."
msgstr ""

#: ../../../edac/scrub.rst:84
msgid ""
"User-space tools enable on-demand scrubbing for specific address ranges, "
"provided that the scrubber supports this functionality."
msgstr ""

#: ../../../edac/scrub.rst:87
msgid ""
"User-space tools can also control memory DIMM scrubbing at a configurable "
"scrub rate via sysfs scrub controls. This approach offers several benefits:"
msgstr ""

#: ../../../edac/scrub.rst:90
msgid ""
"4.1. Detects uncorrectable memory errors early, before user access to "
"affected"
msgstr ""

#: ../../../edac/scrub.rst:91
msgid "memory, helping facilitate recovery."
msgstr ""

#: ../../../edac/scrub.rst:93
msgid ""
"4.2. Reduces the likelihood of correctable errors developing into "
"uncorrectable"
msgstr ""

#: ../../../edac/scrub.rst:94
msgid "errors."
msgstr ""

#: ../../../edac/scrub.rst:96
msgid ""
"Policy control for hotplugged memory is necessary because there may not be a "
"system-wide BIOS or similar control to manage scrub settings for a CXL "
"device added after boot. Determining these settings is a policy decision, "
"balancing reliability against performance, so userspace should control it. "
"Therefore, a unified interface is recommended for handling this function in "
"a way that aligns with other similar interfaces, rather than creating a "
"separate one."
msgstr ""

#: ../../../edac/scrub.rst:105
msgid "Scrubbing features"
msgstr ""

#: ../../../edac/scrub.rst:108
msgid "CXL Memory Scrubbing features"
msgstr ""

#: ../../../edac/scrub.rst:110
msgid ""
"CXL spec r3.1 [1]_ section 8.2.9.9.11.1 describes the memory device patrol "
"scrub control feature. The device patrol scrub proactively locates and makes "
"corrections to errors in regular cycle. The patrol scrub control allows the "
"userspace request to change CXL patrol scrubber's configurations."
msgstr ""

#: ../../../edac/scrub.rst:115
msgid ""
"The patrol scrub control allows the requester to specify the number of hours "
"in which the patrol scrub cycles must be completed, provided that the "
"requested scrub rate must be within the supported range of the scrub rate "
"that the device is capable of. In the CXL driver, the number of seconds per "
"scrub cycles, which user requests via sysfs, is rescaled to hours per scrub "
"cycles."
msgstr ""

#: ../../../edac/scrub.rst:122
msgid ""
"In addition, they allow the host to disable the feature in case it "
"interferes with performance-aware operations which require the background "
"operations to be turned off."
msgstr ""

#: ../../../edac/scrub.rst:127
msgid "Error Check Scrub (ECS)"
msgstr ""

#: ../../../edac/scrub.rst:129
msgid ""
"CXL spec r3.1 [1]_ section 8.2.9.9.11.2 describes Error Check Scrub (ECS) - "
"a feature defined in the JEDEC DDR5 SDRAM Specification (JESD79-5) and "
"allowing DRAM to internally read, correct single-bit errors, and write back "
"corrected data bits to the DRAM array while providing transparency to error "
"counts."
msgstr ""

#: ../../../edac/scrub.rst:135
msgid ""
"The DDR5 device contains number of memory media Field Replaceable Units "
"(FRU) per device. The DDR5 ECS feature and thus the ECS control driver "
"supports configuring the ECS parameters per FRU."
msgstr ""

#: ../../../edac/scrub.rst:140
msgid "ACPI RAS2 Hardware-based Memory Scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:142
msgid ""
"ACPI spec 6.5 [2]_ section 5.2.21 ACPI RAS2 describes an ACPI RAS2 table "
"which provides interfaces for platform RAS features and supports independent "
"RAS controls and capabilities for a given RAS feature for multiple instances "
"of the same component in a given system."
msgstr ""

#: ../../../edac/scrub.rst:147
msgid ""
"Memory RAS features apply to RAS capabilities, controls and operations that "
"are specific to memory. RAS2 PCC sub-spaces for memory-specific RAS features "
"have a Feature Type of 0x00 (Memory)."
msgstr ""

#: ../../../edac/scrub.rst:151
msgid ""
"The platform can use the hardware-based memory scrubbing feature to expose "
"controls and capabilities associated with hardware-based memory scrub "
"engines. The RAS2 memory scrubbing feature supports as per spec,"
msgstr ""

#: ../../../edac/scrub.rst:155
msgid ""
"Independent memory scrubbing controls for each NUMA domain, identified using "
"its proximity domain."
msgstr ""

#: ../../../edac/scrub.rst:158
msgid ""
"Provision for background (patrol) scrubbing of the entire memory system, as "
"well as on-demand scrubbing for a specific region of memory."
msgstr ""

#: ../../../edac/scrub.rst:162
msgid "ACPI Address Range Scrubbing (ARS)"
msgstr ""

#: ../../../edac/scrub.rst:164
msgid ""
"ACPI spec 6.5 [2]_ section 9.19.7.2 describes Address Range Scrubbing (ARS). "
"ARS allows the platform to communicate memory errors to system software. "
"This capability allows system software to prevent accesses to addresses with "
"uncorrectable errors in memory. ARS functions manage all NVDIMMs present in "
"the system. Only one scrub can be in progress system wide at any given time."
msgstr ""

#: ../../../edac/scrub.rst:170
msgid "The following functions are supported as per the specification:"
msgstr ""

#: ../../../edac/scrub.rst:172
msgid ""
"Query ARS Capabilities for a given address range, indicates platform "
"supports the ACPI NVDIMM Root Device Unconsumed Error Notification."
msgstr ""

#: ../../../edac/scrub.rst:175
msgid ""
"Start ARS triggers an Address Range Scrub for the given memory range. "
"Address scrubbing can be done for volatile or persistent memory, or both."
msgstr ""

#: ../../../edac/scrub.rst:178
msgid ""
"Query ARS Status command allows software to get the status of ARS, including "
"the progress of ARS and ARS error record."
msgstr ""

#: ../../../edac/scrub.rst:181
msgid "Clear Uncorrectable Error."
msgstr ""

#: ../../../edac/scrub.rst:183
msgid "Translate SPA"
msgstr ""

#: ../../../edac/scrub.rst:185
msgid "ARS Error Inject etc."
msgstr ""

#: ../../../edac/scrub.rst:187
msgid ""
"The kernel supports an existing control for ARS and ARS is currently not "
"supported in EDAC."
msgstr ""

#: ../../../edac/scrub.rst:190
msgid "https://computeexpresslink.org/cxl-specification/"
msgstr ""

#: ../../../edac/scrub.rst:192
msgid "https://uefi.org/specs/ACPI/6.5/"
msgstr ""

#: ../../../edac/scrub.rst:195
msgid "Comparison of various scrubbing features"
msgstr ""

#: ../../../edac/scrub.rst:199
msgid "Name"
msgstr ""

#: ../../../edac/scrub.rst:198
msgid "ACPI RAS2"
msgstr ""

#: ../../../edac/scrub.rst:198
msgid "CXL patrol scrub"
msgstr ""

#: ../../../edac/scrub.rst:198
msgid "CXL ECS"
msgstr ""

#: ../../../edac/scrub.rst:198
msgid "ARS"
msgstr ""

#: ../../../edac/scrub.rst:202
msgid "On-demand Scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:202 ../../../edac/scrub.rst:207
#: ../../../edac/scrub.rst:217 ../../../edac/scrub.rst:222
#: ../../../edac/scrub.rst:227 ../../../edac/scrub.rst:237
#: ../../../edac/scrub.rst:247
msgid "Supported"
msgstr ""

#: ../../../edac/scrub.rst:202 ../../../edac/scrub.rst:207
#: ../../../edac/scrub.rst:222 ../../../edac/scrub.rst:227
#: ../../../edac/scrub.rst:232 ../../../edac/scrub.rst:237
#: ../../../edac/scrub.rst:247
msgid "No"
msgstr ""

#: ../../../edac/scrub.rst:207
msgid "Background scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:212
msgid "Mode of scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:212
msgid "Scrub ctrl per NUMA domain."
msgstr ""

#: ../../../edac/scrub.rst:212
msgid "per device"
msgstr ""

#: ../../../edac/scrub.rst:212
msgid "per memory media"
msgstr ""

#: ../../../edac/scrub.rst:212
msgid "Unknown"
msgstr ""

#: ../../../edac/scrub.rst:217
msgid "Query scrub capabilities"
msgstr ""

#: ../../../edac/scrub.rst:222
msgid "Setting address range"
msgstr ""

#: ../../../edac/scrub.rst:227
msgid "Setting scrub rate"
msgstr ""

#: ../../../edac/scrub.rst:232
msgid "Unit for scrub rate"
msgstr ""

#: ../../../edac/scrub.rst:232
msgid "Not Defined"
msgstr ""

#: ../../../edac/scrub.rst:232
msgid "in hours"
msgstr ""

#: ../../../edac/scrub.rst:237
msgid "Scrub status/ Completion"
msgstr ""

#: ../../../edac/scrub.rst:236
msgid "Supported on-demand scrubbing only"
msgstr ""

#: ../../../edac/scrub.rst:241
msgid "UC error reporting"
msgstr ""

#: ../../../edac/scrub.rst:242
msgid "Exception"
msgstr ""

#: ../../../edac/scrub.rst:241
msgid "CXL general media/DRAM event/media scan?"
msgstr ""

#: ../../../edac/scrub.rst:241
msgid "ACPI UCE notify and query ARS status"
msgstr ""

#: ../../../edac/scrub.rst:247
msgid "Support for EDAC control"
msgstr ""

#: ../../../edac/scrub.rst:253
msgid "The File System"
msgstr ""

#: ../../../edac/scrub.rst:255
msgid ""
"The control attributes of a registered scrubber instance could be accessed "
"in:"
msgstr ""

#: ../../../edac/scrub.rst:258
msgid "/sys/bus/edac/devices/<dev-name>/scrubX/"
msgstr ""

#: ../../../edac/scrub.rst:261
msgid "sysfs"
msgstr ""

#: ../../../edac/scrub.rst:263
msgid ""
"Sysfs files are documented in `Documentation/ABI/testing/sysfs-edac-scrub`"
msgstr ""

#: ../../../edac/scrub.rst:266
msgid "`Documentation/ABI/testing/sysfs-edac-ecs`"
msgstr ""

#: ../../../edac/scrub.rst:269
msgid "Examples"
msgstr ""

#: ../../../edac/scrub.rst:271
msgid "The usage takes the form shown in these examples:"
msgstr ""

#: ../../../edac/scrub.rst:273
msgid "CXL memory Patrol Scrub"
msgstr ""

#: ../../../edac/scrub.rst:275
msgid ""
"The following are the use cases identified why we might increase the scrub "
"rate."
msgstr ""

#: ../../../edac/scrub.rst:277
msgid ""
"Scrubbing is needed at device granularity because a device is showing "
"unexpectedly high errors."
msgstr ""

#: ../../../edac/scrub.rst:280
msgid ""
"Scrubbing may apply to memory that isn't online at all yet. Likely this is a "
"system wide default setting on boot."
msgstr ""

#: ../../../edac/scrub.rst:283
msgid ""
"Scrubbing at a higher rate because the monitor software has determined that "
"more reliability is necessary for a particular data set. This is called "
"Differentiated Reliability."
msgstr ""

#: ../../../edac/scrub.rst:287
msgid "1.1. Device based scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:289
msgid ""
"CXL memory is exposed to memory management subsystem and ultimately "
"userspace via CXL devices. Device-based scrubbing is used for the first use "
"case described in \"Section 1 CXL Memory Patrol Scrub\"."
msgstr ""

#: ../../../edac/scrub.rst:293
msgid ""
"When combining control via the device interfaces and region interfaces, "
"\"see Section 1.2 Region based scrubbing\"."
msgstr ""

#: ../../../edac/scrub.rst:296 ../../../edac/scrub.rst:326
msgid ""
"Sysfs files for scrubbing are documented in `Documentation/ABI/testing/sysfs-"
"edac-scrub`"
msgstr ""

#: ../../../edac/scrub.rst:299
msgid "1.2. Region based scrubbing"
msgstr ""

#: ../../../edac/scrub.rst:301
msgid ""
"CXL memory is exposed to memory management subsystem and ultimately "
"userspace via CXL regions. CXL Regions represent mapped memory capacity in "
"system physical address space. These can incorporate one or more parts of "
"multiple CXL memory devices with traffic interleaved across them. The user "
"may want to control the scrub rate via this more abstract region instead of "
"having to figure out the constituent devices and program them separately. "
"The scrub rate for each device covers the whole device. Thus if multiple "
"regions use parts of that device then requests for scrubbing of other "
"regions may result in a higher scrub rate than requested for this specific "
"region."
msgstr ""

#: ../../../edac/scrub.rst:311
msgid ""
"Region-based scrubbing is used for the third use case described in \"Section "
"1 CXL Memory Patrol Scrub\"."
msgstr ""

#: ../../../edac/scrub.rst:314
msgid ""
"Userspace must follow below set of rules on how to set the scrub rates for "
"any mixture of requirements."
msgstr ""

#: ../../../edac/scrub.rst:317
msgid ""
"Taking each region in turn from lowest desired scrub rate to highest and set "
"their scrub rates. Later regions may override the scrub rate on individual "
"devices (and hence potentially whole regions)."
msgstr ""

#: ../../../edac/scrub.rst:321
msgid ""
"Take each device for which enhanced scrubbing is required (higher rate) and "
"set those scrub rates. This will override the scrub rates of individual "
"devices, setting them to the maximum rate required for any of the regions "
"they help back, unless a specific rate is already defined."
msgstr ""

#: ../../../edac/scrub.rst:329
msgid "CXL memory Error Check Scrub (ECS)"
msgstr ""

#: ../../../edac/scrub.rst:331
msgid ""
"The Error Check Scrub (ECS) feature enables a memory device to perform error "
"checking and correction (ECC) and count single-bit errors. The associated "
"memory controller sets the ECS mode with a trigger sent to the memory "
"device. CXL ECS control allows the host, thus the userspace, to change the "
"attributes for error count mode, threshold number of errors per segment "
"(indicating how many segments have at least that number of errors) for "
"reporting errors, and reset the ECS counter. Thus the responsibility for "
"initiating Error Check Scrub on a memory device may lie with the memory "
"controller or platform when unexpectedly high error rates are detected."
msgstr ""

#: ../../../edac/scrub.rst:341
msgid ""
"Sysfs files for scrubbing are documented in `Documentation/ABI/testing/sysfs-"
"edac-ecs`"
msgstr ""
