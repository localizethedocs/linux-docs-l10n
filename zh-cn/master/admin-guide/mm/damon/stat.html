<!DOCTYPE html>

<html lang="zh-CN" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Data Access Monitoring Results Stat &#8212; The Linux Kernel unknown version 文档</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../../_static/documentation_options.js?v=c459948e"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/translations.js?v=beaddf03"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/admin-guide/mm/damon/stat.html" />
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
    <link rel="next" title="HugeTLB Pages" href="../hugetlbpage.html" />
    <link rel="prev" title="DAMON-based LRU-lists Sorting" href="lru_sort.html" />

   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.19.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="提交" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#general-guides-to-kernel-administration">General guides to kernel administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#booting-the-kernel">Booting the kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#tracking-down-and-identifying-problems">Tracking down and identifying problems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#core-kernel-subsystems">Core-kernel subsystems</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cpu-load.html">CPU load</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Memory Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pm/index.html">Power Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../syscall-user-dispatch.html">Syscall User Dispatch</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../java.html">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#block-layer-and-filesystem-administration">Block-layer and filesystem administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#device-specific-guides">Device-specific guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#workload-analysis">Workload analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#everything-else">Everything else</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted documentation</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/admin-guide/mm/damon/stat.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="data-access-monitoring-results-stat">
<h1>Data Access Monitoring Results Stat<a class="headerlink" href="#data-access-monitoring-results-stat" title="Link to this heading">¶</a></h1>
<p>Data Access Monitoring Results Stat (DAMON_STAT) is a static kernel module that
is aimed to be used for simple access pattern monitoring.  It monitors accesses
on the system's entire physical memory using DAMON, and provides simplified
access monitoring results statistics, namely idle time percentiles and
estimated memory bandwidth.</p>
<section id="monitoring-accuracy-and-overhead">
<span id="damon-stat-monitoring-accuracy-overhead"></span><h2>Monitoring Accuracy and Overhead<a class="headerlink" href="#monitoring-accuracy-and-overhead" title="Link to this heading">¶</a></h2>
<p>DAMON_STAT uses monitoring intervals <a class="reference internal" href="../../../mm/damon/design.html#damon-design-monitoring-intervals-autotuning"><span class="std std-ref">auto-tuning</span></a> to make its accuracy high and
overhead minimum.  It auto-tunes the intervals aiming 4 % of observable access
events to be captured in each snapshot, while limiting the resulting sampling
interval to be 5 milliseconds in minimum and 10 seconds in maximum.  On a few
production server systems, it resulted in consuming only 0.x % single CPU time,
while capturing reasonable quality of access patterns.  The tuning-resulting
intervals can be retrieved via <code class="docutils literal notranslate"><span class="pre">aggr_interval_us</span></code> <a class="reference internal" href="#damon-stat-aggr-interval-us"><span class="std std-ref">parameter</span></a>.</p>
</section>
<section id="interface-module-parameters">
<h2>Interface: Module Parameters<a class="headerlink" href="#interface-module-parameters" title="Link to this heading">¶</a></h2>
<p>To use this feature, you should first ensure your system is running on a kernel
that is built with <code class="docutils literal notranslate"><span class="pre">CONFIG_DAMON_STAT=y</span></code>.  The feature can be enabled by
default at build time, by setting <code class="docutils literal notranslate"><span class="pre">CONFIG_DAMON_STAT_ENABLED_DEFAULT</span></code> true.</p>
<p>To let sysadmins enable or disable it at boot and/or runtime, and read the
monitoring results, DAMON_STAT provides module parameters.  Following
sections are descriptions of the parameters.</p>
<section id="enabled">
<h3>enabled<a class="headerlink" href="#enabled" title="Link to this heading">¶</a></h3>
<p>Enable or disable DAMON_STAT.</p>
<p>You can enable DAMON_STAT by setting the value of this parameter as <code class="docutils literal notranslate"><span class="pre">Y</span></code>.
Setting it as <code class="docutils literal notranslate"><span class="pre">N</span></code> disables DAMON_STAT.  The default value is set by
<code class="docutils literal notranslate"><span class="pre">CONFIG_DAMON_STAT_ENABLED_DEFAULT</span></code> build config option.</p>
</section>
<section id="aggr-interval-us">
<span id="damon-stat-aggr-interval-us"></span><h3>aggr_interval_us<a class="headerlink" href="#aggr-interval-us" title="Link to this heading">¶</a></h3>
<p>Auto-tuned aggregation time interval in microseconds.</p>
<p>Users can read the aggregation interval of DAMON that is being used by the
DAMON instance for DAMON_STAT.  It is <a class="reference internal" href="#damon-stat-monitoring-accuracy-overhead"><span class="std std-ref">auto-tuned</span></a> and therefore the value is
dynamically changed.</p>
</section>
<section id="estimated-memory-bandwidth">
<h3>estimated_memory_bandwidth<a class="headerlink" href="#estimated-memory-bandwidth" title="Link to this heading">¶</a></h3>
<p>Estimated memory bandwidth consumption (bytes per second) of the system.</p>
<p>DAMON_STAT reads observed access events on the current DAMON results snapshot
and converts it to memory bandwidth consumption estimation in bytes per second.
The resulting metric is exposed to user via this read-only parameter.  Because
DAMON uses sampling, this is only an estimation of the access intensity rather
than accurate memory bandwidth.</p>
</section>
<section id="memory-idle-ms-percentiles">
<h3>memory_idle_ms_percentiles<a class="headerlink" href="#memory-idle-ms-percentiles" title="Link to this heading">¶</a></h3>
<p>Per-byte idle time (milliseconds) percentiles of the system.</p>
<p>DAMON_STAT calculates how long each byte of the memory was not accessed until
now (idle time), based on the current DAMON results snapshot.  For regions
having access frequency (nr_accesses) larger than zero, how long the current
access frequency level was kept multiplied by <code class="docutils literal notranslate"><span class="pre">-1</span></code> becomes the idlee time of
every byte of the region.  If a region has zero access frequency (nr_accesses),
how long the region was keeping the zero access frequency (age) becomes the
idle time of every byte of the region.  Then, DAMON_STAT exposes the
percentiles of the idle time values via this read-only parameter.  Reading the
parameter returns 101 idle time values in milliseconds, separated by comma.
Each value represents 0-th, 1st, 2nd, 3rd, ..., 99th and 100th percentile idle
times.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../../_sources/admin-guide/mm/damon/stat.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>