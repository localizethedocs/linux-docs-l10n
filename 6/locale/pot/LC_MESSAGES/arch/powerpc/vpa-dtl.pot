# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-14 08:59+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../arch/powerpc/vpa-dtl.rst:6
msgid "DTL (Dispatch Trace Log)"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:8
msgid "Athira Rajeev, 19 April 2025"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:12
msgid "Contents"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:15
msgid "Basic overview"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:17
msgid ""
"The pseries Shared Processor Logical Partition(SPLPAR) machines can retrieve "
"a log of dispatch and preempt events from the hypervisor using data from "
"Disptach Trace Log(DTL) buffer. With this information, user can retrieve "
"when and why each dispatch & preempt has occurred. The vpa-dtl PMU exposes "
"the Virtual Processor Area(VPA) DTL counters via perf."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:25
msgid "Infrastructure used"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:27
msgid ""
"The VPA DTL PMU counters do not interrupt on overflow or generate any PMI "
"interrupts. Therefore, hrtimer is used to poll the DTL data. The timer "
"nterval can be provided by user via sample_period field in nano seconds. vpa "
"dtl pmu has one hrtimer added per vpa-dtl pmu thread. DTL (Dispatch Trace "
"Log) contains information about dispatch/preempt, enqueue time etc. We "
"directly copy the DTL buffer data as part of auxiliary buffer and it will be "
"processed later. This will avoid time taken to create samples in the kernel "
"space. The PMU driver collecting Dispatch Trace Log (DTL) entries makes use "
"of AUX support in perf infrastructure. On the tools side, this data is made "
"available as PERF_RECORD_AUXTRACE records."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:38
msgid ""
"To correlate each DTL entry with other events across CPU's, an "
"auxtrace_queue is created for each CPU. Each auxtrace queue has a array/list "
"of auxtrace buffers. All auxtrace queues is maintained in auxtrace heap. The "
"queues are sorted based on timestamp. When the different PERF_RECORD_XX "
"records are processed, compare the timestamp of perf record with timestamp "
"of top element in the auxtrace heap so that DTL events can be co-related "
"with other events Process the auxtrace queue if the timestamp of element "
"from heap is lower than timestamp from entry in perf record. Sometimes it "
"could happen that one buffer is only partially processed. if the timestamp "
"of occurrence of another event is more than currently processed element in "
"the queue, it will move on to next perf record. So keep track of position of "
"buffer to continue processing next time. Update the timestamp of the "
"auxtrace heap with the timestamp of last processed entry from the auxtrace "
"buffer."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:52
msgid ""
"This infrastructure ensures dispatch trace log entries can be correlated and "
"presented along with other events like sched."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:56
msgid "vpa-dtl PMU example usage"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:64
msgid "To capture the DTL data using perf record: .. code-block:: sh"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:67
msgid "# ./perf record -a -e sched:\\*,vpa_dtl/dtl_all/ -c 1000000000 sleep 1"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:69
msgid ""
"The result can be interpreted using perf record. Snippet of perf report -D"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:75
msgid ""
"There are different PERF_RECORD_XX records. In that records corresponding to "
"auxtrace buffers includes:"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:78
msgid "PERF_RECORD_AUX Conveys that new data is available in AUX area"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:81
msgid ""
"PERF_RECORD_AUXTRACE_INFO Describes offset and size of auxtrace data in the "
"buffers"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:84
msgid ""
"PERF_RECORD_AUXTRACE This is the record that defines the auxtrace data which "
"here in case of vpa-dtl pmu is dispatch trace log data."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:88
msgid "Snippet from perf report -D showing the PERF_RECORD_AUXTRACE dump"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:92
msgid ""
"0 0 0x39b10 [0x30]: PERF_RECORD_AUXTRACE size: 0x690  offset: 0  ref: 0  "
"idx: 0  tid: -1  cpu: 0 . . ... VPA DTL PMU data: size 1680 bytes, entries "
"is 35 .  00000000: boot_tb: 21349649546353231, tb_freq: 512000000 .  "
"00000030: dispatch_reason:decrementer interrupt, preempt_reason:H_CEDE, "
"enqueue_to_dispatch_time:7064, ready_to_enqueue_time:187, "
"waiting_to_ready_time:6611773 .  00000060: dispatch_reason:priv doorbell, "
"preempt_reason:H_CEDE, enqueue_to_dispatch_time:146, "
"ready_to_enqueue_time:0, waiting_to_ready_time:15359437 .  00000090: "
"dispatch_reason:decrementer interrupt, preempt_reason:H_CEDE, "
"enqueue_to_dispatch_time:4868, ready_to_enqueue_time:232, "
"waiting_to_ready_time:5100709 .  000000c0: dispatch_reason:priv doorbell, "
"preempt_reason:H_CEDE, enqueue_to_dispatch_time:179, "
"ready_to_enqueue_time:0, waiting_to_ready_time:30714243 .  000000f0: "
"dispatch_reason:priv doorbell, preempt_reason:H_CEDE, "
"enqueue_to_dispatch_time:197, ready_to_enqueue_time:0, "
"waiting_to_ready_time:15350648 .  00000120: dispatch_reason:priv doorbell, "
"preempt_reason:H_CEDE, enqueue_to_dispatch_time:213, "
"ready_to_enqueue_time:0, waiting_to_ready_time:15353446 .  00000150: "
"dispatch_reason:priv doorbell, preempt_reason:H_CEDE, "
"enqueue_to_dispatch_time:212, ready_to_enqueue_time:0, "
"waiting_to_ready_time:15355126 .  00000180: dispatch_reason:decrementer "
"interrupt, preempt_reason:H_CEDE, enqueue_to_dispatch_time:6368, "
"ready_to_enqueue_time:164, waiting_to_ready_time:5104665"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:105
msgid "Above is representation of dtl entry of below format:"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:107
msgid "struct dtl_entry {"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:108
msgid ""
"u8      dispatch_reason; u8      preempt_reason; u16     processor_id; "
"u32     enqueue_to_dispatch_time; u32     ready_to_enqueue_time; u32     "
"waiting_to_ready_time; u64     timebase; u64     fault_addr; u64     srr0; "
"u64     srr1;"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:119
msgid "};"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:121
msgid ""
"First two fields represent the dispatch reason and preempt reason. The post "
"processing of PERF_RECORD_AUXTRACE records will translate to meaningful data "
"for user to consume."
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:126
msgid "Visualize the dispatch trace log entries with perf report"
msgstr ""

#: ../../../arch/powerpc/vpa-dtl.rst:144
msgid "Visualize the dispatch trace log entries with perf script"
msgstr ""
