# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-27 13:54+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../networking/xfrm_sync.rst:5
msgid "XFRM"
msgstr ""

#: ../../../networking/xfrm_sync.rst:7
msgid ""
"The sync patches work is based on initial patches from Krisztian "
"<hidden@balabit.hu> and others and additional patches from Jamal "
"<hadi@cyberus.ca>."
msgstr ""

#: ../../../networking/xfrm_sync.rst:11
msgid ""
"The end goal for syncing is to be able to insert attributes + generate "
"events so that the SA can be safely moved from one machine to another for HA "
"purposes. The idea is to synchronize the SA so that the takeover machine can "
"do the processing of the SA as accurate as possible if it has access to it."
msgstr ""

#: ../../../networking/xfrm_sync.rst:17
msgid ""
"We already have the ability to generate SA add/del/upd events. These patches "
"add ability to sync and have accurate lifetime byte (to ensure proper decay "
"of SAs) and replay counters to avoid replay attacks with as minimal loss at "
"failover time. This way a backup stays as closely up-to-date as an active "
"member."
msgstr ""

#: ../../../networking/xfrm_sync.rst:23
msgid ""
"Because the above items change for every packet the SA receives, it is "
"possible for a lot of the events to be generated. For this reason, we also "
"add a nagle-like algorithm to restrict the events. i.e we are going to set "
"thresholds to say \"let me know if the replay sequence threshold is reached "
"or 10 secs have passed\" These thresholds are set system-wide via sysctls or "
"can be updated per SA."
msgstr ""

#: ../../../networking/xfrm_sync.rst:31
msgid ""
"The identified items that need to be synchronized are: - the lifetime byte "
"counter note that: lifetime time limit is not important if you assume the "
"failover machine is known ahead of time since the decay of the time "
"countdown is not driven by packet arrival. - the replay sequence for both "
"inbound and outbound"
msgstr ""

#: ../../../networking/xfrm_sync.rst:39
msgid "1) Message Structure"
msgstr ""

#: ../../../networking/xfrm_sync.rst:41
msgid "nlmsghdr:aevent_id:optional-TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:43
msgid "The netlink message types are:"
msgstr ""

#: ../../../networking/xfrm_sync.rst:45
msgid "XFRM_MSG_NEWAE and XFRM_MSG_GETAE."
msgstr ""

#: ../../../networking/xfrm_sync.rst:47
msgid "A XFRM_MSG_GETAE does not have TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:49
msgid ""
"A XFRM_MSG_NEWAE will have at least two TLVs (as is discussed further below)."
msgstr ""

#: ../../../networking/xfrm_sync.rst:52
msgid "aevent_id structure looks like::"
msgstr ""

#: ../../../networking/xfrm_sync.rst:61
msgid ""
"The unique SA is identified by the combination of xfrm_usersa_id, reqid and "
"saddr."
msgstr ""

#: ../../../networking/xfrm_sync.rst:64
msgid "flags are used to indicate different things. The possible flags are::"
msgstr ""

#: ../../../networking/xfrm_sync.rst:75
msgid ""
"How these flags are used is dependent on the direction of the message "
"(kernel<->user) as well the cause (config, query or event). This is "
"described below in the different messages."
msgstr ""

#: ../../../networking/xfrm_sync.rst:79
msgid ""
"The pid will be set appropriately in netlink to recognize direction (0 to "
"the kernel and pid = processid that created the event when going from kernel "
"to user space)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:83
msgid ""
"A program needs to subscribe to multicast group XFRMNLGRP_AEVENTS to get "
"notified of these events."
msgstr ""

#: ../../../networking/xfrm_sync.rst:87
msgid "2) TLVS reflect the different parameters:"
msgstr ""

#: ../../../networking/xfrm_sync.rst:89
msgid "byte value (XFRMA_LTIME_VAL)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:91
msgid ""
"This TLV carries the running/current counter for byte lifetime since last "
"event."
msgstr ""

#: ../../../networking/xfrm_sync.rst:94
msgid "b)replay value (XFRMA_REPLAY_VAL)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:96
msgid ""
"This TLV carries the running/current counter for replay sequence since last "
"event."
msgstr ""

#: ../../../networking/xfrm_sync.rst:99
msgid "c)replay threshold (XFRMA_REPLAY_THRESH)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:101
msgid ""
"This TLV carries the threshold being used by the kernel to trigger events "
"when the replay sequence is exceeded."
msgstr ""

#: ../../../networking/xfrm_sync.rst:104
msgid "expiry timer (XFRMA_ETIMER_THRESH)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:106
msgid ""
"This is a timer value in milliseconds which is used as the nagle value to "
"rate limit the events."
msgstr ""

#: ../../../networking/xfrm_sync.rst:110
msgid "3) Default configurations for the parameters:"
msgstr ""

#: ../../../networking/xfrm_sync.rst:112
msgid ""
"By default these events should be turned off unless there is at least one "
"listener registered to listen to the multicast group XFRMNLGRP_AEVENTS."
msgstr ""

#: ../../../networking/xfrm_sync.rst:116
msgid ""
"Programs installing SAs will need to specify the two thresholds, however, in "
"order to not change existing applications such as racoon we also provide "
"default threshold values for these different parameters in case they are not "
"specified."
msgstr ""

#: ../../../networking/xfrm_sync.rst:121
msgid "the two sysctls/proc entries are:"
msgstr ""

#: ../../../networking/xfrm_sync.rst:123
msgid ""
"a) /proc/sys/net/core/sysctl_xfrm_aevent_etime used to provide default "
"values for the XFRMA_ETIMER_THRESH in incremental units of time of 100ms. "
"The default is 10 (1 second)"
msgstr ""

#: ../../../networking/xfrm_sync.rst:127
msgid ""
"b) /proc/sys/net/core/sysctl_xfrm_aevent_rseqth used to provide default "
"values for XFRMA_REPLAY_THRESH parameter in incremental packet count. The "
"default is two packets."
msgstr ""

#: ../../../networking/xfrm_sync.rst:132
msgid "4) Message types"
msgstr ""

#: ../../../networking/xfrm_sync.rst:134
msgid ""
"XFRM_MSG_GETAE issued by user-->kernel. XFRM_MSG_GETAE does not carry any "
"TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:137
msgid ""
"The response is a XFRM_MSG_NEWAE which is formatted based on what "
"XFRM_MSG_GETAE queried for."
msgstr ""

#: ../../../networking/xfrm_sync.rst:140
msgid ""
"The response will always have XFRMA_LTIME_VAL and XFRMA_REPLAY_VAL TLVs. * "
"if XFRM_AE_RTHR flag is set, then XFRMA_REPLAY_THRESH is also retrieved * if "
"XFRM_AE_ETHR flag is set, then XFRMA_ETIMER_THRESH is also retrieved"
msgstr ""

#: ../../../networking/xfrm_sync.rst:144
msgid ""
"XFRM_MSG_NEWAE is issued by either user space to configure or kernel to "
"announce events or respond to a XFRM_MSG_GETAE."
msgstr ""

#: ../../../networking/xfrm_sync.rst:147
msgid "user --> kernel to configure a specific SA."
msgstr ""

#: ../../../networking/xfrm_sync.rst:149
msgid ""
"any of the values or threshold parameters can be updated by passing the "
"appropriate TLV."
msgstr ""

#: ../../../networking/xfrm_sync.rst:152
msgid ""
"A response is issued back to the sender in user space to indicate success or "
"failure."
msgstr ""

#: ../../../networking/xfrm_sync.rst:155
msgid ""
"In the case of success, additionally an event with XFRM_MSG_NEWAE is also "
"issued to any listeners as described in iii)."
msgstr ""

#: ../../../networking/xfrm_sync.rst:158
msgid "kernel->user direction as a response to XFRM_MSG_GETAE"
msgstr ""

#: ../../../networking/xfrm_sync.rst:160
msgid ""
"The response will always have XFRMA_LTIME_VAL and XFRMA_REPLAY_VAL TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:162
msgid ""
"The threshold TLVs will be included if explicitly requested in the "
"XFRM_MSG_GETAE message."
msgstr ""

#: ../../../networking/xfrm_sync.rst:165
msgid ""
"kernel->user to report as event if someone sets any values or thresholds for "
"an SA using XFRM_MSG_NEWAE (as described in #i above). In such a case "
"XFRM_AE_CU flag is set to inform the user that the change happened as a "
"result of an update. The message will always have XFRMA_LTIME_VAL and "
"XFRMA_REPLAY_VAL TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:171
msgid ""
"kernel->user to report event when replay threshold or a timeout is exceeded."
msgstr ""

#: ../../../networking/xfrm_sync.rst:174
msgid ""
"In such a case either XFRM_AE_CR (replay exceeded) or XFRM_AE_CE (timeout "
"happened) is set to inform the user what happened. Note the two flags are "
"mutually exclusive. The message will always have XFRMA_LTIME_VAL and "
"XFRMA_REPLAY_VAL TLVs."
msgstr ""

#: ../../../networking/xfrm_sync.rst:180
msgid "Exceptions to threshold settings"
msgstr ""

#: ../../../networking/xfrm_sync.rst:182
msgid ""
"If you have an SA that is getting hit by traffic in bursts such that there "
"is a period where the timer threshold expires with no packets seen, then an "
"odd behavior is seen as follows: The first packet arrival after a timer "
"expiry will trigger a timeout event; i.e we don't wait for a timeout period "
"or a packet threshold to be reached. This is done for simplicity and "
"efficiency reasons."
msgstr ""

#: ../../../networking/xfrm_sync.rst:189
msgid "-JHS"
msgstr ""
