# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-27 13:54+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_TW\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../virt/kvm/devices/xive.rst:5
msgid "POWER9 eXternal Interrupt Virtualization Engine (XIVE Gen1)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:7
msgid "Device types supported:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:8
msgid "KVM_DEV_TYPE_XIVE     POWER9 XIVE Interrupt Controller generation 1"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:10
msgid ""
"This device acts as a VM interrupt controller. It provides the KVM interface "
"to configure the interrupt sources of a VM in the underlying POWER9 XIVE "
"interrupt controller."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:14
msgid ""
"Only one XIVE instance may be instantiated. A guest XIVE device requires a "
"POWER9 host and the guest OS should have support for the XIVE native "
"exploitation interrupt mode. If not, it should run using the legacy "
"interrupt mode, referred as XICS (POWER7/8)."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:19
msgid "Device Mappings"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:21
msgid ""
"The KVM device exposes different MMIO ranges of the XIVE HW which are "
"required for interrupt management. These are exposed to the guest in VMAs "
"populated with a custom VM fault handler."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:25
msgid "Thread Interrupt Management Area (TIMA)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:27
msgid ""
"Each thread has an associated Thread Interrupt Management context composed "
"of a set of registers. These registers let the thread handle priority "
"management and interrupt acknowledgment. The most important are :"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:32
msgid "Interrupt Pending Buffer     (IPB)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:33
msgid "Current Processor Priority   (CPPR)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:34
msgid "Notification Source Register (NSR)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:36
msgid ""
"They are exposed to software in four different pages each proposing a view "
"with a different privilege. The first page is for the physical thread "
"context and the second for the hypervisor. Only the third (operating system) "
"and the fourth (user level) are exposed the guest."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:42
msgid "Event State Buffer (ESB)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:44
msgid ""
"Each source is associated with an Event State Buffer (ESB) with either a "
"pair of even/odd pair of pages which provides commands to manage the source: "
"to trigger, to EOI, to turn off the source for instance."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:49
msgid "Device pass-through"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:51
msgid ""
"When a device is passed-through into the guest, the source interrupts are "
"from a different HW controller (PHB4) and the ESB pages exposed to the guest "
"should accommodate this change."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:55
msgid ""
"The passthru_irq helpers, kvmppc_xive_set_mapped() and "
"kvmppc_xive_clr_mapped() are called when the device HW irqs are mapped into "
"or unmapped from the guest IRQ number space. The KVM device extends these "
"helpers to clear the ESB pages of the guest IRQ number being mapped and then "
"lets the VM fault handler repopulate. The handler will insert the ESB page "
"corresponding to the HW interrupt of the device being passed-through or the "
"initial IPI ESB page if the device has being removed."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:64
msgid ""
"The ESB remapping is fully transparent to the guest and the OS device "
"driver. All handling is done within VFIO and the above helpers in KVM-PPC."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:68
msgid "Groups:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:70
msgid "KVM_DEV_XIVE_GRP_CTRL"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:71
msgid "Provides global controls on the device"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:73 ../../../virt/kvm/devices/xive.rst:102
#: ../../../virt/kvm/devices/xive.rst:125
#: ../../../virt/kvm/devices/xive.rst:154
#: ../../../virt/kvm/devices/xive.rst:198
msgid "Attributes:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:74
msgid ""
"1.1 KVM_DEV_XIVE_RESET (write only) Resets the interrupt controller "
"configuration for sources and event queues. To be used by kexec and kdump."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:78 ../../../virt/kvm/devices/xive.rst:85
msgid "Errors: none"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:80
msgid ""
"1.2 KVM_DEV_XIVE_EQ_SYNC (write only) Sync all the sources and queues and "
"mark the EQ pages dirty. This to make sure that a consistent memory state is "
"captured when migrating the VM."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:87
msgid ""
"1.3 KVM_DEV_XIVE_NR_SERVERS (write only) The kvm_device_attr.addr points to "
"a __u32 value which is the number of interrupt server numbers (ie, highest "
"possible vcpu id plus one)."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:91 ../../../virt/kvm/devices/xive.rst:113
#: ../../../virt/kvm/devices/xive.rst:138
#: ../../../virt/kvm/devices/xive.rst:183
#: ../../../virt/kvm/devices/xive.rst:201
msgid "Errors:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:94 ../../../virt/kvm/devices/xive.rst:142
#: ../../../virt/kvm/devices/xive.rst:143
#: ../../../virt/kvm/devices/xive.rst:144
#: ../../../virt/kvm/devices/xive.rst:187
#: ../../../virt/kvm/devices/xive.rst:188
#: ../../../virt/kvm/devices/xive.rst:189
#: ../../../virt/kvm/devices/xive.rst:190
#: ../../../virt/kvm/devices/xive.rst:205
msgid "-EINVAL"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:94
msgid "Value greater than KVM_MAX_VCPU_IDS."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:95 ../../../virt/kvm/devices/xive.rst:118
#: ../../../virt/kvm/devices/xive.rst:145
#: ../../../virt/kvm/devices/xive.rst:191
msgid "-EFAULT"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:95 ../../../virt/kvm/devices/xive.rst:118
#: ../../../virt/kvm/devices/xive.rst:145
#: ../../../virt/kvm/devices/xive.rst:191
msgid "Invalid user pointer for attr->addr."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:96 ../../../virt/kvm/devices/xive.rst:148
msgid "-EBUSY"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:96
msgid "A vCPU is already connected to the device."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:99
msgid "KVM_DEV_XIVE_GRP_SOURCE (write only)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:100
msgid "Initializes a new source in the XIVE device and mask it."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:103
#: ../../../virt/kvm/devices/xive.rst:126
#: ../../../virt/kvm/devices/xive.rst:199
msgid "Interrupt source number  (64-bit)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:105
#: ../../../virt/kvm/devices/xive.rst:128
msgid "The kvm_device_attr.addr points to a __u64 value::"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:110
msgid "type:  0:MSI 1:LSI"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:111
msgid "level: assertion level in case of an LSI."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:116
msgid "-E2BIG"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:116
msgid "Interrupt source number is out of range"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:117
msgid "-ENOMEM"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:117
msgid "Could not create a new source block"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:119
#: ../../../virt/kvm/devices/xive.rst:146
msgid "-ENXIO"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:119
msgid "Could not allocate underlying HW interrupt"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:122
msgid "KVM_DEV_XIVE_GRP_SOURCE_CONFIG (write only)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:123
msgid "Configures source targeting"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:133
msgid "priority: 0-7 interrupt priority level"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:134
msgid "server: CPU number chosen to handle the interrupt"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:135
msgid "mask: mask flag (unused)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:136
msgid "eisn: Effective Interrupt Source Number"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:141
#: ../../../virt/kvm/devices/xive.rst:186
#: ../../../virt/kvm/devices/xive.rst:204
msgid "-ENOENT"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:141
#: ../../../virt/kvm/devices/xive.rst:204
msgid "Unknown source number"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:142
#: ../../../virt/kvm/devices/xive.rst:205
msgid "Not initialized source number"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:143
#: ../../../virt/kvm/devices/xive.rst:187
msgid "Invalid priority"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:144
msgid "Invalid CPU number."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:146
msgid ""
"CPU event queues not configured or configuration of the underlying HW "
"interrupt failed"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:148
msgid "No CPU available to serve interrupt"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:151
msgid "KVM_DEV_XIVE_GRP_EQ_CONFIG (read-write)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:152
msgid "Configures an event queue of a CPU"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:155
msgid "EQ descriptor identifier (64-bit)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:157
msgid "The EQ descriptor identifier is a tuple (server, priority)::"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:162
msgid "The kvm_device_attr.addr points to::"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:173
msgid "flags: queue flags"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:174
msgid "KVM_XIVE_EQ_ALWAYS_NOTIFY (required)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:175
msgid ""
"forces notification without using the coalescing mechanism provided by the "
"XIVE END ESBs."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:177
msgid "qshift: queue size (power of 2)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:178
msgid "qaddr: real address of queue"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:179
msgid "qtoggle: current queue toggle bit"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:180
msgid "qindex: current queue index"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:181
msgid "pad: reserved for future use"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:186
msgid "Invalid CPU number"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:188
msgid "Invalid flags"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:189
msgid "Invalid queue size"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:190
msgid "Invalid queue address"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:192
msgid "-EIO"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:192
msgid "Configuration of the underlying HW failed"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:195
msgid "KVM_DEV_XIVE_GRP_SOURCE_SYNC (write only)"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:196
msgid "Synchronize the source to flush event notifications"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:208
msgid "VCPU state"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:210
msgid ""
"The XIVE IC maintains VP interrupt state in an internal structure called the "
"NVT. When a VP is not dispatched on a HW processor thread, this structure "
"can be updated by HW if the VP is the target of an event notification."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:215
msgid ""
"It is important for migration to capture the cached IPB from the NVT as it "
"synthesizes the priorities of the pending interrupts. We capture a bit more "
"to report debug information."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:219
msgid "KVM_REG_PPC_VP_STATE (2 * 64bits)::"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:226
msgid "Migration:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:228
msgid ""
"Saving the state of a VM using the XIVE native exploitation mode should "
"follow a specific sequence. When the VM is stopped :"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:231
msgid "Mask all sources (PQ=01) to stop the flow of events."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:233
msgid ""
"2. Sync the XIVE device with the KVM control KVM_DEV_XIVE_EQ_SYNC to flush "
"any in-flight event notification and to stabilize the EQs. At this stage, "
"the EQ pages are marked dirty to make sure they are transferred in the "
"migration sequence."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:238
msgid ""
"3. Capture the state of the source targeting, the EQs configuration and the "
"state of thread interrupt context registers."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:241
msgid "Restore is similar:"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:243
msgid "Restore the EQ configuration. As targeting depends on it."
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:244
msgid "Restore targeting"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:245
msgid "Restore the thread interrupt contexts"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:246
msgid "Restore the source states"
msgstr ""

#: ../../../virt/kvm/devices/xive.rst:247
msgid "Let the vCPU run"
msgstr ""
