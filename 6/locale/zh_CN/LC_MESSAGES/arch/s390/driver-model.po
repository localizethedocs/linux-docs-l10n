# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-27 13:54+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../arch/s390/driver-model.rst:3
msgid "S/390 driver model interfaces"
msgstr ""

#: ../../../arch/s390/driver-model.rst:6
msgid "1. CCW devices"
msgstr ""

#: ../../../arch/s390/driver-model.rst:8
msgid ""
"All devices which can be addressed by means of ccws are called 'CCW devices' "
"- even if they aren't actually driven by ccws."
msgstr ""

#: ../../../arch/s390/driver-model.rst:11
msgid ""
"All ccw devices are accessed via a subchannel, this is reflected in the "
"structures under devices/::"
msgstr ""

#: ../../../arch/s390/driver-model.rst:24
msgid ""
"In this example, device 0815 is accessed via subchannel 0 in subchannel set "
"0, device 4711 via subchannel 1 in subchannel set 0, and subchannel 2 is a "
"non-I/O subchannel. Device 1234 is accessed via subchannel 0 in subchannel "
"set 1."
msgstr ""

#: ../../../arch/s390/driver-model.rst:28
msgid ""
"The subchannel named 'defunct' does not represent any real subchannel on the "
"system; it is a pseudo subchannel where disconnected ccw devices are moved "
"to if they are displaced by another ccw device becoming operational on their "
"former subchannel. The ccw devices will be moved again to a proper "
"subchannel if they become operational again on that subchannel."
msgstr ""

#: ../../../arch/s390/driver-model.rst:34
msgid ""
"You should address a ccw device via its bus id (e.g. 0.0.4711); the device "
"can be found under bus/ccw/devices/."
msgstr ""

#: ../../../arch/s390/driver-model.rst:37
msgid "All ccw devices export some data via sysfs."
msgstr ""

#: ../../../arch/s390/driver-model.rst:39
msgid "cutype:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:40
msgid "The control unit type / model."
msgstr ""

#: ../../../arch/s390/driver-model.rst:42
msgid "devtype:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:43
msgid "The device type / model, if applicable."
msgstr ""

#: ../../../arch/s390/driver-model.rst:45
msgid "availability:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:46
msgid ""
"Can be 'good' or 'boxed'; 'no path' or 'no device' for disconnected devices."
msgstr ""

#: ../../../arch/s390/driver-model.rst:49
msgid "online:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:50
msgid ""
"An interface to set the device online and offline. In the special case of "
"the device being disconnected (see the notify function under 1.2), piping 0 "
"to online will forcibly delete the device."
msgstr ""

#: ../../../arch/s390/driver-model.rst:55
msgid ""
"The device drivers can add entries to export per-device data and interfaces."
msgstr ""

#: ../../../arch/s390/driver-model.rst:57
msgid ""
"There is also some data exported on a per-subchannel basis (see under bus/"
"css/devices/):"
msgstr ""

#: ../../../arch/s390/driver-model.rst:60
msgid "chpids:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:61
msgid "Via which chpids the device is connected."
msgstr ""

#: ../../../arch/s390/driver-model.rst:63
msgid "pimpampom:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:64
msgid "The path installed, path available and path operational masks."
msgstr ""

#: ../../../arch/s390/driver-model.rst:66
msgid "There also might be additional data, for example for block devices."
msgstr ""

#: ../../../arch/s390/driver-model.rst:70
msgid "1.1 Bringing up a ccw device"
msgstr ""

#: ../../../arch/s390/driver-model.rst:72
msgid "This is done in several steps."
msgstr ""

#: ../../../arch/s390/driver-model.rst:74
msgid ""
"Each driver can provide one or more parameter interfaces where parameters "
"can be specified. These interfaces are also in the driver's responsibility."
msgstr ""

#: ../../../arch/s390/driver-model.rst:76
msgid ""
"After a. has been performed, if necessary, the device is finally brought up "
"via the 'online' interface."
msgstr ""

#: ../../../arch/s390/driver-model.rst:81
msgid "1.2 Writing a driver for ccw devices"
msgstr ""

#: ../../../arch/s390/driver-model.rst:83
msgid ""
"The basic struct ccw_device and struct ccw_driver data structures can be "
"found under include/asm/ccwdev.h::"
msgstr ""

#: ../../../arch/s390/driver-model.rst:111
msgid ""
"The 'private' field contains data needed for internal i/o operation only, "
"and is not available to the device driver."
msgstr ""

#: ../../../arch/s390/driver-model.rst:114
msgid ""
"Each driver should declare in a MODULE_DEVICE_TABLE into which CU types/"
"models and/or device types/models it is interested. This information can "
"later be found in the struct ccw_device_id fields::"
msgstr ""

#: ../../../arch/s390/driver-model.rst:129
msgid "The functions in ccw_driver should be used in the following way:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:131
msgid "probe:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:132
msgid ""
"This function is called by the device layer for each device the driver is "
"interested in. The driver should only allocate private structures to put in "
"dev->driver_data and create attributes (if needed). Also, the interrupt "
"handler (see below) should be set here."
msgstr ""

#: ../../../arch/s390/driver-model.rst:141
#: ../../../arch/s390/driver-model.rst:154
#: ../../../arch/s390/driver-model.rst:168
#: ../../../arch/s390/driver-model.rst:182
#: ../../../arch/s390/driver-model.rst:211
msgid "Parameters:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:142
#: ../../../arch/s390/driver-model.rst:155
#: ../../../arch/s390/driver-model.rst:169
#: ../../../arch/s390/driver-model.rst:183
#: ../../../arch/s390/driver-model.rst:212
msgid "cdev"
msgstr ""

#: ../../../arch/s390/driver-model.rst:143
msgid "the device to be probed."
msgstr ""

#: ../../../arch/s390/driver-model.rst:146
msgid "remove:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:147
msgid ""
"This function is called by the device layer upon removal of the driver, the "
"device or the module. The driver should perform cleanups here."
msgstr ""

#: ../../../arch/s390/driver-model.rst:156
msgid "the device to be removed."
msgstr ""

#: ../../../arch/s390/driver-model.rst:159
msgid "set_online:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:160
msgid ""
"This function is called by the common I/O layer when the device is activated "
"via the 'online' attribute. The driver should finally setup and activate the "
"device here."
msgstr ""

#: ../../../arch/s390/driver-model.rst:170
msgid ""
"the device to be activated. The common layer has verified that the device is "
"not already online."
msgstr ""

#: ../../../arch/s390/driver-model.rst:174
msgid ""
"set_offline: This function is called by the common I/O layer when the device "
"is"
msgstr ""

#: ../../../arch/s390/driver-model.rst:175
msgid ""
"de-activated via the 'online' attribute. The driver should shut down the "
"device, but not de-allocate its private data."
msgstr ""

#: ../../../arch/s390/driver-model.rst:184
msgid "the device to be deactivated. The common layer has"
msgstr ""

#: ../../../arch/s390/driver-model.rst:185
msgid "verified that the device is online."
msgstr ""

#: ../../../arch/s390/driver-model.rst:188
msgid "notify:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:189
msgid ""
"This function is called by the common I/O layer for some state changes of "
"the device."
msgstr ""

#: ../../../arch/s390/driver-model.rst:192
msgid "Signalled to the driver are:"
msgstr ""

#: ../../../arch/s390/driver-model.rst:194
msgid ""
"In online state, device detached (CIO_GONE) or last path gone (CIO_NO_PATH). "
"The driver must return !0 to keep the device; for return code 0, the device "
"will be deleted as usual (also when no notify function is registered). If "
"the driver wants to keep the device, it is moved into disconnected state."
msgstr ""

#: ../../../arch/s390/driver-model.rst:199
msgid ""
"In disconnected state, device operational again (CIO_OPER). The common I/O "
"layer performs some sanity checks on device number and Device / CU to be "
"reasonably sure if it is still the same device. If not, the old device is "
"removed and a new one registered. By the return code of the notify function "
"the device driver signals if it wants the device back: !0 for keeping, 0 to "
"make the device being removed and re-registered."
msgstr ""

#: ../../../arch/s390/driver-model.rst:213
msgid "the device whose state changed."
msgstr ""

#: ../../../arch/s390/driver-model.rst:215
msgid "event"
msgstr ""

#: ../../../arch/s390/driver-model.rst:216
msgid ""
"the event that happened. This can be one of CIO_GONE, CIO_NO_PATH or "
"CIO_OPER."
msgstr ""

#: ../../../arch/s390/driver-model.rst:219
msgid ""
"The handler field of the struct ccw_device is meant to be set to the "
"interrupt handler for the device. In order to accommodate drivers which use "
"several distinct handlers (e.g. multi subchannel devices), this is a member "
"of ccw_device instead of ccw_driver. The handler is registered with the "
"common layer during set_online() processing before the driver is called, and "
"is deregistered during set_offline() after the driver has been called. Also, "
"after registering / before deregistering, path grouping resp. disbanding of "
"the path group (if applicable) are performed."
msgstr ""

#: ../../../arch/s390/driver-model.rst:232
msgid "Parameters:     dev     - the device the handler is called for"
msgstr ""

#: ../../../arch/s390/driver-model.rst:233
msgid "intparm - the intparm which allows the device driver to identify"
msgstr ""

#: ../../../arch/s390/driver-model.rst:234
msgid ""
"the i/o the interrupt is associated with, or to recognize the interrupt as "
"unsolicited."
msgstr ""

#: ../../../arch/s390/driver-model.rst:236
msgid "irb     - interruption response block which contains the accumulated"
msgstr ""

#: ../../../arch/s390/driver-model.rst:237
msgid "status."
msgstr ""

#: ../../../arch/s390/driver-model.rst:239
msgid ""
"The device driver is called from the common ccw_device layer and can "
"retrieve information about the interrupt from the irb parameter."
msgstr ""

#: ../../../arch/s390/driver-model.rst:244
msgid "1.3 ccwgroup devices"
msgstr ""

#: ../../../arch/s390/driver-model.rst:246
msgid ""
"The ccwgroup mechanism is designed to handle devices consisting of multiple "
"ccw devices, like qeth or ctc."
msgstr ""

#: ../../../arch/s390/driver-model.rst:249
msgid ""
"The ccw driver provides a 'group' attribute. Piping bus ids of ccw devices "
"to this attributes creates a ccwgroup device consisting of these ccw devices "
"(if possible). This ccwgroup device can be set online or offline just like a "
"normal ccw device."
msgstr ""

#: ../../../arch/s390/driver-model.rst:254
msgid ""
"Each ccwgroup device also provides an 'ungroup' attribute to destroy the "
"device again (only when offline). This is a generic ccwgroup mechanism (the "
"driver does not need to implement anything beyond normal removal routines)."
msgstr ""

#: ../../../arch/s390/driver-model.rst:258
msgid ""
"A ccw device which is a member of a ccwgroup device carries a pointer to the "
"ccwgroup device in the driver_data of its device struct. This field must not "
"be touched by the driver - it should use the ccwgroup device's driver_data "
"for its private data."
msgstr ""

#: ../../../arch/s390/driver-model.rst:263
msgid ""
"To implement a ccwgroup driver, please refer to include/asm/ccwgroup.h. Keep "
"in mind that most drivers will need to implement both a ccwgroup and a ccw "
"driver."
msgstr ""

#: ../../../arch/s390/driver-model.rst:269
msgid "2. Channel paths"
msgstr ""

#: ../../../arch/s390/driver-model.rst:271
msgid ""
"Channel paths show up, like subchannels, under the channel subsystem root "
"(css0) and are called 'chp0.<chpid>'. They have no driver and do not belong "
"to any bus. Please note, that unlike /proc/chpids in 2.4, the channel path "
"objects reflect only the logical state and not the physical state, since we "
"cannot track the latter consistently due to lacking machine support (we "
"don't need to be aware of it anyway)."
msgstr ""

#: ../../../arch/s390/driver-model.rst:278
msgid "status"
msgstr ""

#: ../../../arch/s390/driver-model.rst:279
msgid ""
"Can be 'online' or 'offline'. Piping 'on' or 'off' sets the chpid logically "
"online/offline. Piping 'on' to an online chpid triggers path reprobing for "
"all devices the chpid connects to. This can be used to force the kernel to "
"re-use a channel path the user knows to be online, but the machine hasn't "
"created a machine check for."
msgstr ""

#: ../../../arch/s390/driver-model.rst:286
msgid "type"
msgstr ""

#: ../../../arch/s390/driver-model.rst:287
msgid "The physical type of the channel path."
msgstr ""

#: ../../../arch/s390/driver-model.rst:289
msgid "shared"
msgstr ""

#: ../../../arch/s390/driver-model.rst:290
msgid "Whether the channel path is shared."
msgstr ""

#: ../../../arch/s390/driver-model.rst:292
msgid "cmg"
msgstr ""

#: ../../../arch/s390/driver-model.rst:293
msgid "The channel measurement group."
msgstr ""

#: ../../../arch/s390/driver-model.rst:296
msgid "3. System devices"
msgstr ""

#: ../../../arch/s390/driver-model.rst:299
msgid "3.1 xpram"
msgstr ""

#: ../../../arch/s390/driver-model.rst:301
msgid "xpram shows up under devices/system/ as 'xpram'."
msgstr ""

#: ../../../arch/s390/driver-model.rst:304
msgid "3.2 cpus"
msgstr ""

#: ../../../arch/s390/driver-model.rst:306
msgid ""
"For each cpu, a directory is created under devices/system/cpu/. Each cpu has "
"an attribute 'online' which can be 0 or 1."
msgstr ""
