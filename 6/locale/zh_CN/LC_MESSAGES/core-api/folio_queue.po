# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel 6\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-14 08:59+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../core-api/folio_queue.rst:5
msgid "Folio Queue"
msgstr ""

#: ../../../core-api/folio_queue.rst:0
msgid "Author"
msgstr ""

#: ../../../core-api/folio_queue.rst:7
msgid "David Howells <dhowells@redhat.com>"
msgstr ""

#: ../../../core-api/folio_queue.rst:22
msgid "Overview"
msgstr ""

#: ../../../core-api/folio_queue.rst:24
msgid ""
"The folio_queue struct forms a single segment in a segmented list of folios "
"that can be used to form an I/O buffer.  As such, the list can be iterated "
"over using the ITER_FOLIOQ iov_iter type."
msgstr ""

#: ../../../core-api/folio_queue.rst:28
msgid "The publicly accessible members of the structure are::"
msgstr ""

#: ../../../core-api/folio_queue.rst:36
msgid ""
"A pair of pointers are provided, ``next`` and ``prev``, that point to the "
"segments on either side of the segment being accessed.  Whilst this is a "
"doubly-linked list, it is intentionally not a circular list; the outward "
"sibling pointers in terminal segments should be NULL."
msgstr ""

#: ../../../core-api/folio_queue.rst:41
msgid "Each segment in the list also stores:"
msgstr ""

#: ../../../core-api/folio_queue.rst:43
msgid "an ordered sequence of folio pointers,"
msgstr ""

#: ../../../core-api/folio_queue.rst:44
msgid "the size of each folio and"
msgstr ""

#: ../../../core-api/folio_queue.rst:45
msgid "three 1-bit marks per folio,"
msgstr ""

#: ../../../core-api/folio_queue.rst:47
msgid ""
"but these should not be accessed directly as the underlying data structure "
"may change, but rather the access functions outlined below should be used."
msgstr ""

#: ../../../core-api/folio_queue.rst:50
msgid "The facility can be made accessible by::"
msgstr ""

#: ../../../core-api/folio_queue.rst:54
msgid "and to use the iterator::"
msgstr ""

#: ../../../core-api/folio_queue.rst:60
msgid "Initialisation"
msgstr ""

#: ../../../core-api/folio_queue.rst:62
msgid "A segment should be initialised by calling::"
msgstr ""

#: ../../../core-api/folio_queue.rst:66
msgid ""
"with a pointer to the segment to be initialised.  Note that this will not "
"necessarily initialise all the folio pointers, so care must be taken to "
"check the number of folios added."
msgstr ""

#: ../../../core-api/folio_queue.rst:72
msgid "Adding and removing folios"
msgstr ""

#: ../../../core-api/folio_queue.rst:74
msgid ""
"Folios can be set in the next unused slot in a segment struct by calling one "
"of::"
msgstr ""

#: ../../../core-api/folio_queue.rst:83
msgid ""
"Both functions update the stored folio count, store the folio and note its "
"size.  The second function also sets the first mark for the folio added.  "
"Both functions return the number of the slot used.  [!] Note that no attempt "
"is made to check that the capacity wasn't overrun and the list will not be "
"extended automatically."
msgstr ""

#: ../../../core-api/folio_queue.rst:89
msgid "A folio can be excised by calling::"
msgstr ""

#: ../../../core-api/folio_queue.rst:93
msgid ""
"This clears the slot in the array and also clears all the marks for that "
"folio, but doesn't change the folio count - so future accesses of that slot "
"must check if the slot is occupied."
msgstr ""

#: ../../../core-api/folio_queue.rst:99
msgid "Querying information about a folio"
msgstr ""

#: ../../../core-api/folio_queue.rst:101
msgid ""
"Information about the folio in a particular slot may be queried by the "
"following function::"
msgstr ""

#: ../../../core-api/folio_queue.rst:107
msgid ""
"If a folio has not yet been set in that slot, this may yield an undefined "
"pointer.  The size of the folio in a slot may be queried with either of::"
msgstr ""

#: ../../../core-api/folio_queue.rst:116
msgid ""
"The first function returns the size as an order and the second as a number "
"of bytes."
msgstr ""

#: ../../../core-api/folio_queue.rst:121
msgid "Querying information about a folio_queue"
msgstr ""

#: ../../../core-api/folio_queue.rst:123
msgid ""
"Information may be retrieved about a particular segment with the following "
"functions::"
msgstr ""

#: ../../../core-api/folio_queue.rst:132
msgid ""
"The first function returns the maximum capacity of a segment.  It must not "
"be assumed that this won't vary between segments.  The second returns the "
"number of folios added to a segments and the third is a shorthand to "
"indicate if the segment has been filled to capacity."
msgstr ""

#: ../../../core-api/folio_queue.rst:137
msgid ""
"Not that the count and fullness are not affected by clearing folios from the "
"segment.  These are more about indicating how many slots in the array have "
"been initialised, and it assumed that slots won't get reused, but rather the "
"segment will get discarded as the queue is consumed."
msgstr ""

#: ../../../core-api/folio_queue.rst:144
msgid "Folio marks"
msgstr ""

#: ../../../core-api/folio_queue.rst:146
msgid ""
"Folios within a queue can also have marks assigned to them.  These marks can "
"be used to note information such as if a folio needs folio_put() calling "
"upon it. There are three marks available to be set for each folio."
msgstr ""

#: ../../../core-api/folio_queue.rst:150
msgid "The marks can be set by::"
msgstr ""

#: ../../../core-api/folio_queue.rst:155
msgid "Cleared by::"
msgstr ""

#: ../../../core-api/folio_queue.rst:160
msgid "And the marks can be queried by::"
msgstr ""

#: ../../../core-api/folio_queue.rst:165
msgid ""
"The marks can be used for any purpose and are not interpreted by this API."
msgstr ""

#: ../../../core-api/folio_queue.rst:169
msgid "Folio queue iteration"
msgstr ""

#: ../../../core-api/folio_queue.rst:171
msgid ""
"A list of segments may be iterated over using the I/O iterator facility "
"using an ``iov_iter`` iterator of ``ITER_FOLIOQ`` type.  The iterator may be "
"initialised with::"
msgstr ""

#: ../../../core-api/folio_queue.rst:180
msgid ""
"This may be told to start at a particular segment, slot and offset within a "
"queue.  The iov iterator functions will follow the next pointers when "
"advancing and prev pointers when reverting when needed."
msgstr ""

#: ../../../core-api/folio_queue.rst:186
msgid "Lockless simultaneous production/consumption issues"
msgstr ""

#: ../../../core-api/folio_queue.rst:188
msgid ""
"If properly managed, the list can be extended by the producer at the head "
"end and shortened by the consumer at the tail end simultaneously without the "
"need to take locks.  The ITER_FOLIOQ iterator inserts appropriate barriers "
"to aid with this."
msgstr ""

#: ../../../core-api/folio_queue.rst:193
msgid ""
"Care must be taken when simultaneously producing and consuming a list.  If "
"the last segment is reached and the folios it refers to are entirely "
"consumed by the IOV iterators, an iov_iter struct will be left pointing to "
"the last segment with a slot number equal to the capacity of that segment.  "
"The iterator will try to continue on from this if there's another segment "
"available when it is used again, but care must be taken lest the segment got "
"removed and freed by the consumer before the iterator was advanced."
msgstr ""

#: ../../../core-api/folio_queue.rst:201
msgid ""
"It is recommended that the queue always contain at least one segment, even "
"if that segment has never been filled or is entirely spent.  This prevents "
"the head and tail pointers from collapsing."
msgstr ""

#: ../../../core-api/folio_queue.rst:207
msgid "API Function Reference"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:45
msgid "Initialise a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:49
#: include/linux/folio_queue.h:69 include/linux/folio_queue.h:81
#: include/linux/folio_queue.h:93 include/linux/folio_queue.h:106
#: include/linux/folio_queue.h:119 include/linux/folio_queue.h:132
#: include/linux/folio_queue.h:145 include/linux/folio_queue.h:158
#: include/linux/folio_queue.h:171 include/linux/folio_queue.h:184
#: include/linux/folio_queue.h:206 include/linux/folio_queue.h:229
#: include/linux/folio_queue.h:244 include/linux/folio_queue.h:258
#: include/linux/folio_queue.h:272
msgid "**Parameters**"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:51
#: include/linux/folio_queue.h:83 include/linux/folio_queue.h:95
#: include/linux/folio_queue.h:121 include/linux/folio_queue.h:134
#: include/linux/folio_queue.h:160 include/linux/folio_queue.h:173
#: include/linux/folio_queue.h:186 include/linux/folio_queue.h:208
#: include/linux/folio_queue.h:274
msgid "``struct folio_queue *folioq``"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:46
msgid "The segment to initialise"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:48
msgid "``unsigned int rreq_id``"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:47
msgid "The request identifier to use in tracelines."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:49
#: include/linux/folio_queue.h:68 include/linux/folio_queue.h:80
#: include/linux/folio_queue.h:92 include/linux/folio_queue.h:106
#: include/linux/folio_queue.h:119 include/linux/folio_queue.h:132
#: include/linux/folio_queue.h:145 include/linux/folio_queue.h:158
#: include/linux/folio_queue.h:171 include/linux/folio_queue.h:184
#: include/linux/folio_queue.h:206 include/linux/folio_queue.h:229
#: include/linux/folio_queue.h:244 include/linux/folio_queue.h:258
#: include/linux/folio_queue.h:272
msgid "**Description**"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:48
msgid ""
"Initialise a folio queue segment and set an identifier to be used in traces."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:50
msgid "Note that the folio pointers are left uninitialised."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:65
msgid "Query the capacity of a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:71
#: include/linux/folio_queue.h:108 include/linux/folio_queue.h:147
#: include/linux/folio_queue.h:231 include/linux/folio_queue.h:246
#: include/linux/folio_queue.h:260
msgid "``const struct folio_queue *folioq``"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:66
#: include/linux/folio_queue.h:78 include/linux/folio_queue.h:90
#: include/linux/folio_queue.h:103 include/linux/folio_queue.h:142
msgid "The segment to query"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:67
msgid ""
"Query the number of folios that a particular folio queue segment might hold. "
"[!] NOTE: This must not be assumed to be the same for every segment!"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:77
msgid "Query the occupancy of a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:79
msgid ""
"Query the number of folios that have been added to a folio queue segment. "
"Note that this is not decreased as folios are removed from a segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:89
msgid "Query if a folio queue segment is full"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:91
msgid ""
"Query if a folio queue segment is fully occupied.  Note that this does not "
"change if folios are removed from a segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:102
msgid "Check first folio mark in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:105
#: include/linux/folio_queue.h:118 include/linux/folio_queue.h:131
#: include/linux/folio_queue.h:144 include/linux/folio_queue.h:157
#: include/linux/folio_queue.h:170 include/linux/folio_queue.h:228
#: include/linux/folio_queue.h:243 include/linux/folio_queue.h:257
#: include/linux/folio_queue.h:271
msgid "``unsigned int slot``"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:104
#: include/linux/folio_queue.h:143
msgid "The slot number of the folio to query"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:105
msgid ""
"Determine if the first mark is set for the folio in the specified slot in a "
"folio queue segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:115
msgid "Set the first mark on a folio in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:116
#: include/linux/folio_queue.h:129 include/linux/folio_queue.h:155
#: include/linux/folio_queue.h:168
msgid "The segment to modify"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:117
#: include/linux/folio_queue.h:130 include/linux/folio_queue.h:156
#: include/linux/folio_queue.h:169
msgid "The slot number of the folio to modify"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:118
msgid ""
"Set the first mark for the folio in the specified slot in a folio queue "
"segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:128
msgid "Clear the first mark on a folio in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:131
msgid ""
"Clear the first mark for the folio in the specified slot in a folio queue "
"segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:141
msgid "Check second folio mark in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:144
msgid ""
"Determine if the second mark is set for the folio in the specified slot in a "
"folio queue segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:154
msgid "Set the second mark on a folio in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:157
msgid ""
"Set the second mark for the folio in the specified slot in a folio queue "
"segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:167
msgid "Clear the second mark on a folio in a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:170
msgid ""
"Clear the second mark for the folio in the specified slot in a folio queue "
"segment."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:180
#: include/linux/folio_queue.h:202
msgid "Add a folio to a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:181
#: include/linux/folio_queue.h:203
msgid "The segment to add to"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:183
#: include/linux/folio_queue.h:205
msgid "``struct folio *folio``"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:182
#: include/linux/folio_queue.h:204
msgid "The folio to add"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:183
msgid ""
"Add a folio to the tail of the sequence in a folio queue segment, increasing "
"the occupancy count and returning the slot number for the folio just added. "
"The folio size is extracted and stored in the queue and the marks are left "
"unmodified."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:188
#: include/linux/folio_queue.h:210
msgid ""
"Note that it's left up to the caller to check that the segment capacity will "
"not be exceeded and to extend the queue."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:205
msgid ""
"Add a folio to the tail of the sequence in a folio queue segment, increasing "
"the occupancy count and returning the slot number for the folio just added. "
"The folio size is extracted and stored in the queue, the first mark is set "
"and and the second and third marks are left unmodified."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:225
msgid "Get a folio from a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:226
#: include/linux/folio_queue.h:241 include/linux/folio_queue.h:255
msgid "The segment to access"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:227
#: include/linux/folio_queue.h:242 include/linux/folio_queue.h:256
msgid "The folio slot to access"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:228
msgid ""
"Retrieve the folio in the specified slot from a folio queue segment.  Note "
"that no bounds check is made and if the slot hasn't been added into yet, the "
"pointer will be undefined.  If the slot has been cleared, NULL will be "
"returned."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:240
msgid "Get the order of a folio from a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:243
msgid ""
"Retrieve the order of the folio in the specified slot from a folio queue "
"segment.  Note that no bounds check is made and if the slot hasn't been "
"added into yet, the order returned will be 0."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:254
msgid "Get the size of a folio from a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:257
msgid ""
"Retrieve the size of the folio in the specified slot from a folio queue "
"segment.  Note that no bounds check is made and if the slot hasn't been "
"added into yet, the size returned will be PAGE_SIZE."
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:268
msgid "Clear a folio from a folio queue segment"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:269
msgid "The segment to clear"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:270
msgid "The folio slot to clear"
msgstr ""

#: ../../../core-api/folio_queue:209: include/linux/folio_queue.h:271
msgid ""
"Clear a folio from a sequence in a folio queue segment and clear its marks. "
"The occupancy count is left unchanged."
msgstr ""
