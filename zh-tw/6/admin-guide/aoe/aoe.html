<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Introduction &#8212; The Linux Kernel  說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=0d9984b1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/admin-guide/aoe/aoe.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="TODO" href="todo.html" />
    <link rel="prev" title="ATA over Ethernet (AoE)" href="index.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.18.0-rc2</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">子系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#general-guides-to-kernel-administration">General guides to kernel administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#booting-the-kernel">Booting the kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tracking-down-and-identifying-problems">Tracking down and identifying problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#core-kernel-subsystems">Core-kernel subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#block-layer-and-filesystem-administration">Block-layer and filesystem administration</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#device-specific-guides">Device-specific guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../acpi/index.html">ACPI 支援</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../edid.html">EDID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hw_random.html">Hardware random number generators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../media/index.html">Media subsystem admin and user guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvme-multipath.html">Linux NVMe multipath</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parport.html">Parport</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thermal/index.html">Thermal Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../video-output.html">Video Output Switcher Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#workload-analysis">Workload analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#everything-else">Everything else</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/aoe/aoe.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="連結到這個標頭">¶</a></h1>
<p>ATA over Ethernet is a network protocol that provides simple access to
block storage on the LAN.</p>
<blockquote>
<div><p><a class="reference external" href="http://support.coraid.com/documents/AoEr11.txt">http://support.coraid.com/documents/AoEr11.txt</a></p>
</div></blockquote>
<p>The EtherDrive (R) HOWTO for 2.6 and 3.x kernels is found at ...</p>
<blockquote>
<div><p><a class="reference external" href="http://support.coraid.com/support/linux/EtherDrive-2.6-HOWTO.html">http://support.coraid.com/support/linux/EtherDrive-2.6-HOWTO.html</a></p>
</div></blockquote>
<p>It has many tips and hints!  Please see, especially, recommended
tunings for virtual memory:</p>
<blockquote>
<div><p><a class="reference external" href="http://support.coraid.com/support/linux/EtherDrive-2.6-HOWTO-5.html#ss5.19">http://support.coraid.com/support/linux/EtherDrive-2.6-HOWTO-5.html#ss5.19</a></p>
</div></blockquote>
<p>The aoetools are userland programs that are designed to work with this
driver.  The aoetools are on sourceforge.</p>
<blockquote>
<div><p><a class="reference external" href="http://aoetools.sourceforge.net/">http://aoetools.sourceforge.net/</a></p>
</div></blockquote>
<p>The scripts in this Documentation/admin-guide/aoe directory are intended to
document the use of the driver and are not necessary if you install
the aoetools.</p>
</section>
<section id="creating-device-nodes">
<h1>Creating Device Nodes<a class="headerlink" href="#creating-device-nodes" title="連結到這個標頭">¶</a></h1>
<blockquote>
<div><p>Users of udev should find the block device nodes created
automatically, but to create all the necessary device nodes, use the
udev configuration rules provided in udev.txt (in this directory).</p>
<p>There is a udev-install.sh script that shows how to install these
rules on your system.</p>
<p>There is also an autoload script that shows how to edit
/etc/modprobe.d/aoe.conf to ensure that the aoe module is loaded when
necessary.  Preloading the aoe module is preferable to autoloading,
however, because AoE discovery takes a few seconds.  It can be
confusing when an AoE device is not present the first time the a
command is run but appears a second later.</p>
</div></blockquote>
</section>
<section id="using-device-nodes">
<h1>Using Device Nodes<a class="headerlink" href="#using-device-nodes" title="連結到這個標頭">¶</a></h1>
<blockquote>
<div><p>&quot;cat /dev/etherd/err&quot; blocks, waiting for error diagnostic output,
like any retransmitted packets.</p>
<p>&quot;echo eth2 eth4 &gt; /dev/etherd/interfaces&quot; tells the aoe driver to
limit ATA over Ethernet traffic to eth2 and eth4.  AoE traffic from
untrusted networks should be ignored as a matter of security.  See
also the aoe_iflist driver option described below.</p>
<p>&quot;echo &gt; /dev/etherd/discover&quot; tells the driver to find out what AoE
devices are available.</p>
<p>In the future these character devices may disappear and be replaced
by sysfs counterparts.  Using the commands in aoetools insulates
users from these implementation details.</p>
<p>The block devices are named like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>e{shelf}.{slot}
e{shelf}.{slot}p{part}
</pre></div>
</div>
<p>... so that &quot;e0.2&quot; is the third blade from the left (slot 2) in the
first shelf (shelf address zero).  That's the whole disk.  The first
partition on that disk would be &quot;e0.2p1&quot;.</p>
</div></blockquote>
</section>
<section id="using-sysfs">
<h1>Using sysfs<a class="headerlink" href="#using-sysfs" title="連結到這個標頭">¶</a></h1>
<blockquote>
<div><p>Each aoe block device in /sys/block has the extra attributes of
state, mac, and netif.  The state attribute is &quot;up&quot; when the device
is ready for I/O and &quot;down&quot; if detected but unusable.  The
&quot;down,closewait&quot; state shows that the device is still open and
cannot come up again until it has been closed.</p>
<p>The mac attribute is the ethernet address of the remote AoE device.
The netif attribute is the network interface on the localhost
through which we are communicating with the remote AoE device.</p>
<p>There is a script in this directory that formats this information in
a convenient way.  Users with aoetools should use the aoe-stat
command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>root@makki root# sh Documentation/admin-guide/aoe/status.sh
   e10.0            eth3              up
   e10.1            eth3              up
   e10.2            eth3              up
   e10.3            eth3              up
   e10.4            eth3              up
   e10.5            eth3              up
   e10.6            eth3              up
   e10.7            eth3              up
   e10.8            eth3              up
   e10.9            eth3              up
    e4.0            eth1              up
    e4.1            eth1              up
    e4.2            eth1              up
    e4.3            eth1              up
    e4.4            eth1              up
    e4.5            eth1              up
    e4.6            eth1              up
    e4.7            eth1              up
    e4.8            eth1              up
    e4.9            eth1              up
</pre></div>
</div>
<p>Use /sys/module/aoe/parameters/aoe_iflist (or better, the driver
option discussed below) instead of /dev/etherd/interfaces to limit
AoE traffic to the network interfaces in the given
whitespace-separated list.  Unlike the old character device, the
sysfs entry can be read from as well as written to.</p>
<p>It's helpful to trigger discovery after setting the list of allowed
interfaces.  The aoetools package provides an aoe-discover script
for this purpose.  You can also directly use the
/dev/etherd/discover special file described above.</p>
</div></blockquote>
</section>
<section id="driver-options">
<h1>Driver Options<a class="headerlink" href="#driver-options" title="連結到這個標頭">¶</a></h1>
<blockquote>
<div><p>There is a boot option for the built-in aoe driver and a
corresponding module parameter, aoe_iflist.  Without this option,
all network interfaces may be used for ATA over Ethernet.  Here is a
usage example for the module parameter:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>modprobe aoe_iflist=&quot;eth1 eth3&quot;
</pre></div>
</div>
<p>The aoe_deadsecs module parameter determines the maximum number of
seconds that the driver will wait for an AoE device to provide a
response to an AoE command.  After aoe_deadsecs seconds have
elapsed, the AoE device will be marked as &quot;down&quot;.  A value of zero
is supported for testing purposes and makes the aoe driver keep
trying AoE commands forever.</p>
<p>The aoe_maxout module parameter has a default of 128.  This is the
maximum number of unresponded packets that will be sent to an AoE
target at one time.</p>
<p>The aoe_dyndevs module parameter defaults to 1, meaning that the
driver will assign a block device minor number to a discovered AoE
target based on the order of its discovery.  With dynamic minor
device numbers in use, a greater range of AoE shelf and slot
addresses can be supported.  Users with udev will never have to
think about minor numbers.  Using aoe_dyndevs=0 allows device nodes
to be pre-created using a static minor-number scheme with the
aoe-mkshelf script in the aoetools.</p>
</div></blockquote>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/admin-guide/aoe/aoe.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>