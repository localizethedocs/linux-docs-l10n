<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>FPGA Manager &#8212; The Linux Kernel  說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=0d9984b1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/driver-api/fpga/fpga-mgr.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="FPGA Bridge" href="fpga-bridge.html" />
    <link rel="prev" title="Introduction" href="intro.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.18.0-rc2</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Driver APIs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#general-information-for-driver-authors">General information for driver authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#useful-support-libraries">Useful support libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#bus-level-documentation">Bus-level documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#subsystem-specific-apis">Subsystem-specific APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer's Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../acpi/index.html">ACPI 支援</a></li>
<li class="toctree-l3"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../coco/index.html">Confidential Computing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto/index.html">Crypto Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dmaengine/index.html">DMAEngine 文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpll.html">The Linux kernel dpll subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../extcon.html">Extcon Device Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">FPGA 子系統</a></li>
<li class="toctree-l3"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aperture.html">Managing Ownership of the Framebuffer Aperture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hte/index.html">The Linux Hardware Timestamping Engine (HTE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../libata.html">libATA Developer's Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtd/index.html">記憶體技術裝置（MTD）</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pin-control.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pwrseq.html">Power Sequencing API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reset.html">Reset controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../soundwire/index.html">SoundWire 文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../surface_aggregator/index.html">Surface System Aggregator Module (SSAM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tee.html">TEE (Trusted Execution Environment) driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tty/index.html">TTY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wbrf.html">WBRF - Wifi Band RFI Mitigations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wmi.html">WMI Driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">子系統</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../core-api/index.html">核心 API 文件</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Driver implementer's API guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mm/index.html">記憶體管理文件</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../power/index.html">電源管理</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../scheduler/index.html">Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../timers/index.html">計時器</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/fpga/fpga-mgr.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="fpga-manager">
<h1>FPGA Manager<a class="headerlink" href="#fpga-manager" title="連結到這個標頭">¶</a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="連結到這個標頭">¶</a></h2>
<p>The FPGA manager core exports a set of functions for programming an FPGA with
an image.  The API is manufacturer agnostic.  All manufacturer specifics are
hidden away in a low level driver which registers a set of ops with the core.
The FPGA image data itself is very manufacturer specific, but for our purposes
it's just binary data.  The FPGA manager core won't parse it.</p>
<p>The FPGA image to be programmed can be in a scatter gather list, a single
contiguous buffer, or a firmware file.  Because allocating contiguous kernel
memory for the buffer should be avoided, users are encouraged to use a scatter
gather list instead if possible.</p>
<p>The particulars for programming the image are presented in a structure (<a class="reference internal" href="fpga-programming.html#c.fpga_image_info" title="fpga_image_info"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span>
<span class="pre">fpga_image_info</span></code></a>).  This <code class="xref c c-struct broken_xref docutils literal notranslate"><span class="pre">struct</span> <span class="pre">contains</span></code> parameters such as pointers to the
FPGA image as well as image-specific particulars such as whether the image was
built for full or partial reconfiguration.</p>
</section>
<section id="how-to-support-a-new-fpga-device">
<h2>How to support a new FPGA device<a class="headerlink" href="#how-to-support-a-new-fpga-device" title="連結到這個標頭">¶</a></h2>
<p>To add another FPGA manager, write a driver that implements a set of ops.  The
probe function calls <code class="docutils literal notranslate"><span class="pre">fpga_mgr_register()</span></code> or <code class="docutils literal notranslate"><span class="pre">fpga_mgr_register_full()</span></code>,
such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct fpga_manager_ops socfpga_fpga_ops = {
        .write_init = socfpga_fpga_ops_configure_init,
        .write = socfpga_fpga_ops_configure_write,
        .write_complete = socfpga_fpga_ops_configure_complete,
        .state = socfpga_fpga_ops_state,
};

static int socfpga_fpga_probe(struct platform_device *pdev)
{
        struct device *dev = &amp;pdev-&gt;dev;
        struct socfpga_fpga_priv *priv;
        struct fpga_manager *mgr;
        int ret;

        priv = devm_kzalloc(dev, sizeof(*priv), GFP_KERNEL);
        if (!priv)
                return -ENOMEM;

        /*
         * do ioremaps, get interrupts, etc. and save
         * them in priv
         */

        mgr = fpga_mgr_register(dev, &quot;Altera SOCFPGA FPGA Manager&quot;,
                                &amp;socfpga_fpga_ops, priv);
        if (IS_ERR(mgr))
                return PTR_ERR(mgr);

        platform_set_drvdata(pdev, mgr);

        return 0;
}

static int socfpga_fpga_remove(struct platform_device *pdev)
{
        struct fpga_manager *mgr = platform_get_drvdata(pdev);

        fpga_mgr_unregister(mgr);

        return 0;
}
</pre></div>
</div>
<p>Alternatively, the probe function could call one of the resource managed
register functions, <code class="docutils literal notranslate"><span class="pre">devm_fpga_mgr_register()</span></code> or
<code class="docutils literal notranslate"><span class="pre">devm_fpga_mgr_register_full()</span></code>.  When these functions are used, the
parameter syntax is the same, but the call to <code class="docutils literal notranslate"><span class="pre">fpga_mgr_unregister()</span></code> should be
removed. In the above example, the <code class="docutils literal notranslate"><span class="pre">socfpga_fpga_remove()</span></code> function would not be
required.</p>
<p>The ops will implement whatever device specific register writes are needed to
do the programming sequence for this particular FPGA.  These ops return 0 for
success or negative error codes otherwise.</p>
<dl class="simple">
<dt>The programming sequence is::</dt><dd><ol class="arabic simple">
<li><p>.parse_header (optional, may be called once or multiple times)</p></li>
<li><p>.write_init</p></li>
<li><p>.write or .write_sg (may be called once or multiple times)</p></li>
<li><p>.write_complete</p></li>
</ol>
</dd>
</dl>
<p>The .parse_header function will set header_size and data_size to
<a class="reference internal" href="fpga-programming.html#c.fpga_image_info" title="fpga_image_info"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_image_info</span></code></a>. Before parse_header call, header_size is initialized
with initial_header_size. If flag skip_header of fpga_manager_ops is true,
.write function will get image buffer starting at header_size offset from the
beginning. If data_size is set, .write function will get data_size bytes of
the image buffer, otherwise .write will get data up to the end of image buffer.
This will not affect .write_sg, .write_sg will still get whole image in
sg_table form. If FPGA image is already mapped as a single contiguous buffer,
whole buffer will be passed into .parse_header. If image is in scatter-gather
form, core code will buffer up at least .initial_header_size before the first
call of .parse_header, if it is not enough, .parse_header should set desired
size into info-&gt;header_size and return -EAGAIN, then it will be called again
with greater part of image buffer on the input.</p>
<p>The .write_init function will prepare the FPGA to receive the image data. The
buffer passed into .write_init will be at least info-&gt;header_size bytes long;
if the whole bitstream is not immediately available then the core code will
buffer up at least this much before starting.</p>
<p>The .write function writes a buffer to the FPGA. The buffer may be contain the
whole FPGA image or may be a smaller chunk of an FPGA image.  In the latter
case, this function is called multiple times for successive chunks. This interface
is suitable for drivers which use PIO.</p>
<p>The .write_sg version behaves the same as .write except the input is a sg_table
scatter list. This interface is suitable for drivers which use DMA.</p>
<p>The .write_complete function is called after all the image has been written
to put the FPGA into operating mode.</p>
<p>The ops include a .state function which will determine the state the FPGA is in
and return a code of type <a class="reference internal" href="#c.fpga_mgr_states" title="fpga_mgr_states"><code class="xref c c-enum docutils literal notranslate"><span class="pre">enum</span> <span class="pre">fpga_mgr_states</span></code></a>.  It doesn't result in a change
in state.</p>
</section>
<section id="api-for-implementing-a-new-fpga-manager-driver">
<h2>API for implementing a new FPGA Manager driver<a class="headerlink" href="#api-for-implementing-a-new-fpga-manager-driver" title="連結到這個標頭">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fpga_mgr_states</span></code> -  Values for <span class="c-expr sig sig-inline c"><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n">fpga_manager</span></a><span class="o">-&gt;</span><span class="n">state</span></span>.</p></li>
<li><p><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span></code></a> -  the FPGA manager struct</p></li>
<li><p><a class="reference internal" href="#c.fpga_manager_ops" title="fpga_manager_ops"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager_ops</span></code></a> -  Low level FPGA manager driver ops</p></li>
<li><p><a class="reference internal" href="#c.fpga_manager_info" title="fpga_manager_info"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager_info</span></code></a> -  Parameter structure for <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register_full()</span></code></p></li>
<li><p><a class="reference internal" href="#c.__fpga_mgr_register_full" title="__fpga_mgr_register_full"><code class="xref c c-func docutils literal notranslate"><span class="pre">__fpga_mgr_register_full()</span></code></a> -  Create and register an FPGA manager using the
fpga_mgr_info structure to provide the full flexibility of options</p></li>
<li><p><a class="reference internal" href="#c.__fpga_mgr_register" title="__fpga_mgr_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">__fpga_mgr_register()</span></code></a> -  Create and register an FPGA manager using standard
arguments</p></li>
<li><p><a class="reference internal" href="#c.__devm_fpga_mgr_register_full" title="__devm_fpga_mgr_register_full"><code class="xref c c-func docutils literal notranslate"><span class="pre">__devm_fpga_mgr_register_full()</span></code></a> -  Resource managed version of
<a class="reference internal" href="#c.__fpga_mgr_register_full" title="__fpga_mgr_register_full"><code class="xref c c-func docutils literal notranslate"><span class="pre">__fpga_mgr_register_full()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.__devm_fpga_mgr_register" title="__devm_fpga_mgr_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">__devm_fpga_mgr_register()</span></code></a> -  Resource managed version of <a class="reference internal" href="#c.__fpga_mgr_register" title="__fpga_mgr_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">__fpga_mgr_register()</span></code></a></p></li>
<li><p><a class="reference internal" href="#c.fpga_mgr_unregister" title="fpga_mgr_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_mgr_unregister()</span></code></a> -  Unregister an FPGA manager</p></li>
</ul>
<p>Helper macros <code class="docutils literal notranslate"><span class="pre">fpga_mgr_register_full()</span></code>, <code class="docutils literal notranslate"><span class="pre">fpga_mgr_register()</span></code>,
<code class="docutils literal notranslate"><span class="pre">devm_fpga_mgr_register_full()</span></code>, and <code class="docutils literal notranslate"><span class="pre">devm_fpga_mgr_register()</span></code> are available
to ease the registration.</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.fpga_mgr_states">
<span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fpga_mgr_states</span></span></span><a class="headerlink" href="#c.fpga_mgr_states" title="連結到這個定義">¶</a><br /></dt>
<dd><p>fpga framework states</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_UNKNOWN</span></code></dt><dd><p>can't determine state</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_POWER_OFF</span></code></dt><dd><p>FPGA power is off</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_POWER_UP</span></code></dt><dd><p>FPGA reports power is up</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_RESET</span></code></dt><dd><p>FPGA in reset state</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_FIRMWARE_REQ</span></code></dt><dd><p>firmware request in progress</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_FIRMWARE_REQ_ERR</span></code></dt><dd><p>firmware request failed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_PARSE_HEADER</span></code></dt><dd><p>parse FPGA image header</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_PARSE_HEADER_ERR</span></code></dt><dd><p>Error during PARSE_HEADER stage</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE_INIT</span></code></dt><dd><p>preparing FPGA for programming</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE_INIT_ERR</span></code></dt><dd><p>Error during WRITE_INIT stage</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE</span></code></dt><dd><p>writing image to FPGA</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE_ERR</span></code></dt><dd><p>Error while writing FPGA</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE_COMPLETE</span></code></dt><dd><p>Doing post programming steps</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_WRITE_COMPLETE_ERR</span></code></dt><dd><p>Error during WRITE_COMPLETE</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">FPGA_MGR_STATE_OPERATING</span></code></dt><dd><p>FPGA is programmed and operating</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.fpga_manager">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fpga_manager</span></span></span><a class="headerlink" href="#c.fpga_manager" title="連結到這個定義">¶</a><br /></dt>
<dd><p>fpga manager structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct fpga_manager {
    const char *name;
    struct device dev;
    struct mutex ref_mutex;
    enum fpga_mgr_states state;
    struct fpga_compat_id *compat_id;
    const struct fpga_manager_ops *mops;
    struct module *mops_owner;
    void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>name of low level fpga manager</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>fpga manager device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ref_mutex</span></code></dt><dd><p>only allows one reference to fpga manager</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>state of fpga manager</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compat_id</span></code></dt><dd><p>FPGA manager id for compatibility check.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mops</span></code></dt><dd><p>pointer to <code class="xref c c-struct broken_xref docutils literal notranslate"><span class="pre">struct</span> <span class="pre">of</span></code> fpga manager ops</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mops_owner</span></code></dt><dd><p>module containing the mops</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>low level driver private date</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.fpga_manager_ops">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fpga_manager_ops</span></span></span><a class="headerlink" href="#c.fpga_manager_ops" title="連結到這個定義">¶</a><br /></dt>
<dd><p>ops for low level fpga manager drivers</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct fpga_manager_ops {
    size_t initial_header_size;
    bool skip_header;
    enum fpga_mgr_states (*state)(struct fpga_manager *mgr);
    u64 (*status)(struct fpga_manager *mgr);
    int (*parse_header)(struct fpga_manager *mgr, struct fpga_image_info *info, const char *buf, size_t count);
    int (*write_init)(struct fpga_manager *mgr, struct fpga_image_info *info, const char *buf, size_t count);
    int (*write)(struct fpga_manager *mgr, const char *buf, size_t count);
    int (*write_sg)(struct fpga_manager *mgr, struct sg_table *sgt);
    int (*write_complete)(struct fpga_manager *mgr, struct fpga_image_info *info);
    void (*fpga_remove)(struct fpga_manager *mgr);
    const struct attribute_group **groups;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">initial_header_size</span></code></dt><dd><p>minimum number of bytes that should be passed into
parse_header and write_init.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">skip_header</span></code></dt><dd><p>bool flag to tell fpga-mgr core whether it should skip
info-&gt;header_size part at the beginning of the image when invoking
write callback.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">state</span></code></dt><dd><p>returns an <code class="xref c c-enum broken_xref docutils literal notranslate"><span class="pre">enum</span> <span class="pre">value</span></code> of the FPGA's state</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>returns status of the FPGA, including reconfiguration error code</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">parse_header</span></code></dt><dd><p>parse FPGA image header to set info-&gt;header_size and
info-&gt;data_size. In case the input buffer is not large enough, set
required size to info-&gt;header_size and return -EAGAIN.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_init</span></code></dt><dd><p>prepare the FPGA to receive configuration data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt><dd><p>write count bytes of configuration data to the FPGA</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_sg</span></code></dt><dd><p>write the scatter list of configuration data to the FPGA</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_complete</span></code></dt><dd><p>set FPGA to operating state after writing is done</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fpga_remove</span></code></dt><dd><p>optional: Set FPGA into a specific state during driver remove</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">groups</span></code></dt><dd><p>optional attribute groups.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>fpga_manager_ops are the low level functions implemented by a specific
fpga manager driver.  The optional ones are tested for NULL before being
called, so leaving them out is fine.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.fpga_manager_info">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fpga_manager_info</span></span></span><a class="headerlink" href="#c.fpga_manager_info" title="連結到這個定義">¶</a><br /></dt>
<dd><p>collection of parameters for an FPGA Manager</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct fpga_manager_info {
    const char *name;
    struct fpga_compat_id *compat_id;
    const struct fpga_manager_ops *mops;
    void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>fpga manager name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compat_id</span></code></dt><dd><p>FPGA manager id for compatibility check.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mops</span></code></dt><dd><p>pointer to structure of fpga manager ops</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>fpga manager private data</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>fpga_manager_info contains parameters for the register_full function.
These are separated into an info structure because they some are optional
others could be added to in the future. The info structure facilitates
maintaining a stable API.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.__fpga_mgr_register_full">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n"><span class="pre">fpga_manager</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">__fpga_mgr_register_full</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager_info" title="fpga_manager_info"><span class="n"><span class="pre">fpga_manager_info</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">info</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">module</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">owner</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.__fpga_mgr_register_full" title="連結到這個定義">¶</a><br /></dt>
<dd><p>create and register an FPGA Manager device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>fpga manager device from pdev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">fpga_manager_info</span> <span class="pre">*info</span></code></dt><dd><p>parameters for fpga manager</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*owner</span></code></dt><dd><p>owner module containing the ops</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>The caller of this function is responsible for calling <a class="reference internal" href="#c.fpga_mgr_unregister" title="fpga_mgr_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_mgr_unregister()</span></code></a>.
Using <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">devm_fpga_mgr_register_full()</span></code> instead is recommended.</p>
<p><strong>Return</strong></p>
<p>pointer to <a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span></code></a> pointer or <a class="reference internal" href="../../core-api/kernel-api.html#c.ERR_PTR" title="ERR_PTR"><code class="xref c c-func docutils literal notranslate"><span class="pre">ERR_PTR()</span></code></a></p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.__fpga_mgr_register">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n"><span class="pre">fpga_manager</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">__fpga_mgr_register</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager_ops" title="fpga_manager_ops"><span class="n"><span class="pre">fpga_manager_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mops</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">priv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">module</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">owner</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.__fpga_mgr_register" title="連結到這個定義">¶</a><br /></dt>
<dd><p>create and register an FPGA Manager device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>fpga manager device from pdev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>fpga manager name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">fpga_manager_ops</span> <span class="pre">*mops</span></code></dt><dd><p>pointer to structure of fpga manager ops</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*priv</span></code></dt><dd><p>fpga manager private data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*owner</span></code></dt><dd><p>owner module containing the ops</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>The caller of this function is responsible for calling <a class="reference internal" href="#c.fpga_mgr_unregister" title="fpga_mgr_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">fpga_mgr_unregister()</span></code></a>.
Using <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">devm_fpga_mgr_register()</span></code> instead is recommended. This simple
version of the register function should be sufficient for most users. The
<code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register_full()</span></code> function is available for users that need to pass
additional, optional parameters.</p>
<p><strong>Return</strong></p>
<p>pointer to <a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span></code></a> pointer or <a class="reference internal" href="../../core-api/kernel-api.html#c.ERR_PTR" title="ERR_PTR"><code class="xref c c-func docutils literal notranslate"><span class="pre">ERR_PTR()</span></code></a></p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.__devm_fpga_mgr_register_full">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n"><span class="pre">fpga_manager</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">__devm_fpga_mgr_register_full</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager_info" title="fpga_manager_info"><span class="n"><span class="pre">fpga_manager_info</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">info</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">module</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">owner</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.__devm_fpga_mgr_register_full" title="連結到這個定義">¶</a><br /></dt>
<dd><p>resource managed variant of <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register()</span></code></p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>fpga manager device from pdev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">fpga_manager_info</span> <span class="pre">*info</span></code></dt><dd><p>parameters for fpga manager</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*owner</span></code></dt><dd><p>owner module containing the ops</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>fpga manager pointer on success, negative error code otherwise.</p>
<p><strong>Description</strong></p>
<p>This is the devres variant of <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register_full()</span></code> for which the unregister
function will be called automatically when the managing device is detached.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.__devm_fpga_mgr_register">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n"><span class="pre">fpga_manager</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">__devm_fpga_mgr_register</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager_ops" title="fpga_manager_ops"><span class="n"><span class="pre">fpga_manager_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mops</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">priv</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">module</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">owner</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.__devm_fpga_mgr_register" title="連結到這個定義">¶</a><br /></dt>
<dd><p>resource managed variant of <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register()</span></code></p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>fpga manager device from pdev</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>fpga manager name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">fpga_manager_ops</span> <span class="pre">*mops</span></code></dt><dd><p>pointer to structure of fpga manager ops</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*priv</span></code></dt><dd><p>fpga manager private data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">module</span> <span class="pre">*owner</span></code></dt><dd><p>owner module containing the ops</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>fpga manager pointer on success, negative error code otherwise.</p>
<p><strong>Description</strong></p>
<p>This is the devres variant of <code class="xref c c-func broken_xref docutils literal notranslate"><span class="pre">fpga_mgr_register()</span></code> for which the
unregister function will be called automatically when the managing
device is detached.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.fpga_mgr_unregister">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">fpga_mgr_unregister</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.fpga_manager" title="fpga_manager"><span class="n"><span class="pre">fpga_manager</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mgr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.fpga_mgr_unregister" title="連結到這個定義">¶</a><br /></dt>
<dd><p>unregister an FPGA manager</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">fpga_manager</span> <span class="pre">*mgr</span></code></dt><dd><p>fpga manager struct</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is intended for use in an FPGA manager driver's remove function.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/driver-api/fpga/fpga-mgr.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>