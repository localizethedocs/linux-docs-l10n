<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>rtla-timerlat-top &#8212; The Linux Kernel  說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=0d9984b1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/tools/rtla/rtla-timerlat-top.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="rtla-hwnoise" href="rtla-hwnoise.html" />
    <link rel="prev" title="rtla-timerlat-hist" href="rtla-timerlat-hist.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.18.0-rc2</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">子系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">使用者空間工具</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">The realtime Linux analysis tool</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rtla.html">rtla</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-osnoise.html">rtla-osnoise</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-osnoise-hist.html">rtla-osnoise-hist</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-osnoise-top.html">rtla-osnoise-top</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-timerlat.html">rtla-timerlat</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-timerlat-hist.html">rtla-timerlat-hist</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">rtla-timerlat-top</a></li>
<li class="toctree-l3"><a class="reference internal" href="rtla-hwnoise.html">rtla-hwnoise</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../rv/index.html">Runtime verification (rv) tool</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/tools/rtla/rtla-timerlat-top.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="rtla-timerlat-top">
<h1>rtla-timerlat-top<a class="headerlink" href="#rtla-timerlat-top" title="連結到這個標頭">¶</a></h1>
<section id="measures-the-operating-system-timer-latency">
<h2>Measures the operating system timer latency<a class="headerlink" href="#measures-the-operating-system-timer-latency" title="連結到這個標頭">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">Manual section<span class="colon">:</span></dt>
<dd class="field-odd"><p>1</p>
</dd>
</dl>
<section id="synopsis">
<h3>SYNOPSIS<a class="headerlink" href="#synopsis" title="連結到這個標頭">¶</a></h3>
<p><strong>rtla timerlat top</strong> [<em>OPTIONS</em>] ...</p>
</section>
<section id="description">
<h3>DESCRIPTION<a class="headerlink" href="#description" title="連結到這個標頭">¶</a></h3>
<p>The <strong>rtla timerlat</strong> tool is an interface for the <em>timerlat</em> tracer. The
<em>timerlat</em> tracer dispatches a kernel thread per-cpu. These threads
set a periodic timer to wake themselves up and go back to sleep. After
the wakeup, they collect and generate useful information for the
debugging of operating system timer latency.</p>
<p>The <em>timerlat</em> tracer outputs information in two ways. It periodically
prints the timer latency at the timer <em>IRQ</em> handler and the <em>Thread</em>
handler. It also enables the trace of the most relevant information via
<strong>osnoise:</strong> tracepoints.</p>
<p>The <strong>rtla timerlat</strong> tool sets the options of the <em>timerlat</em> tracer
and collects and displays a summary of the results. By default,
the collection is done synchronously in kernel space using a dedicated
BPF program attached to the <em>timerlat</em> tracer. If either BPF or
the <strong>osnoise:timerlat_sample</strong> tracepoint it attaches to is
unavailable, the <strong>rtla timerlat</strong> tool falls back to using tracefs to
process the data asynchronously in user space.</p>
<p>The <strong>rtla timerlat top</strong> displays a summary of the periodic output
from the <em>timerlat</em> tracer. It also provides information for each
operating system noise via the <strong>osnoise:</strong> tracepoints that can be
seem with the option <strong>-T</strong>.</p>
</section>
<section id="options">
<h3>OPTIONS<a class="headerlink" href="#options" title="連結到這個標頭">¶</a></h3>
<p><strong>-a</strong>, <strong>--auto</strong> <em>us</em></p>
<blockquote>
<div><p>Set the automatic trace mode. This mode sets some commonly used options
while debugging the system. It is equivalent to use <strong>-T</strong> <em>us</em> <strong>-s</strong> <em>us</em>
<strong>-t</strong>. By default, <em>timerlat</em> tracer uses FIFO:95 for <em>timerlat</em> threads,
thus equilavent to <strong>-P</strong> <em>f:95</em>.</p>
</div></blockquote>
<p><strong>-p</strong>, <strong>--period</strong> <em>us</em></p>
<blockquote>
<div><p>Set the <em>timerlat</em> tracer period in microseconds.</p>
</div></blockquote>
<p><strong>-i</strong>, <strong>--irq</strong> <em>us</em></p>
<blockquote>
<div><p>Stop trace if the <em>IRQ</em> latency is higher than the argument in us.</p>
</div></blockquote>
<p><strong>-T</strong>, <strong>--thread</strong> <em>us</em></p>
<blockquote>
<div><p>Stop trace if the <em>Thread</em> latency is higher than the argument in us.</p>
</div></blockquote>
<p><strong>-s</strong>, <strong>--stack</strong> <em>us</em></p>
<blockquote>
<div><p>Save the stack trace at the <em>IRQ</em> if a <em>Thread</em> latency is higher than the
argument in us.</p>
</div></blockquote>
<p><strong>-t</strong>, <strong>--trace</strong> [<em>file</em>]</p>
<blockquote>
<div><p>Save the stopped trace to [<em>file|timerlat_trace.txt</em>].</p>
</div></blockquote>
<dl>
<dt><strong>--dma-latency</strong> <em>us</em></dt><dd><p>Set the /dev/cpu_dma_latency to <em>us</em>, aiming to bound exit from idle latencies.
<em>cyclictest</em> sets this value to <em>0</em> by default, use <strong>--dma-latency</strong> <em>0</em> to have
similar results.</p>
</dd>
<dt><strong>--deepest-idle-state</strong> <em>n</em></dt><dd><p>Disable idle states higher than <em>n</em> for cpus that are running timerlat threads to
reduce exit from idle latencies. If <em>n</em> is -1, all idle states are disabled.
On exit from timerlat, the idle state setting is restored to its original state
before running timerlat.</p>
<p>Requires rtla to be built with libcpupower.</p>
</dd>
</dl>
<p><strong>-k</strong>, <strong>--kernel-threads</strong></p>
<blockquote>
<div><p>Use timerlat kernel-space threads, in contrast of <strong>-u</strong>.</p>
</div></blockquote>
<p><strong>-u</strong>, <strong>--user-threads</strong></p>
<blockquote>
<div><p>Set timerlat to run without a workload, and then dispatches user-space workloads
to wait on the timerlat_fd. Once the workload is awakes, it goes to sleep again
adding so the measurement for the kernel-to-user and user-to-kernel to the tracer
output. <strong>--user-threads</strong> will be used unless the user specify <strong>-k</strong>.</p>
</div></blockquote>
<p><strong>-U</strong>, <strong>--user-load</strong></p>
<blockquote>
<div><p>Set timerlat to run without workload, waiting for the user to dispatch a per-cpu
task that waits for a new period on the tracing/osnoise/per_cpu/cpu$ID/timerlat_fd.
See linux/tools/rtla/sample/timerlat_load.py for an example of user-load code.</p>
</div></blockquote>
<p><strong>-q</strong>, <strong>--quiet</strong></p>
<blockquote>
<div><p>Print only a summary at the end of the session.</p>
</div></blockquote>
<p><strong>-c</strong>, <strong>--cpus</strong> <em>cpu-list</em></p>
<blockquote>
<div><p>Set the osnoise tracer to run the sample threads in the cpu-list.</p>
</div></blockquote>
<p><strong>-H</strong>, <strong>--house-keeping</strong> <em>cpu-list</em></p>
<blockquote>
<div><p>Run rtla control threads only on the given cpu-list.</p>
</div></blockquote>
<p><strong>-d</strong>, <strong>--duration</strong> <em>time[s|m|h|d]</em></p>
<blockquote>
<div><p>Set the duration of the session.</p>
</div></blockquote>
<p><strong>-D</strong>, <strong>--debug</strong></p>
<blockquote>
<div><p>Print debug info.</p>
</div></blockquote>
<p><strong>-e</strong>, <strong>--event</strong> <em>sys:event</em></p>
<blockquote>
<div><p>Enable an event in the trace (<strong>-t</strong>) session. The argument can be a specific event, e.g., <strong>-e</strong> <em>sched:sched_switch</em>, or all events of a system group, e.g., <strong>-e</strong> <em>sched</em>. Multiple <strong>-e</strong> are allowed. It is only active when <strong>-t</strong> or <strong>-a</strong> are set.</p>
</div></blockquote>
<p><strong>--filter</strong> <em>&lt;filter&gt;</em></p>
<blockquote>
<div><p>Filter the previous <strong>-e</strong> <em>sys:event</em> event with <em>&lt;filter&gt;</em>. For further information about event filtering see <a class="reference external" href="https://www.kernel.org/doc/html/latest/trace/events.html#event-filtering">https://www.kernel.org/doc/html/latest/trace/events.html#event-filtering</a>.</p>
</div></blockquote>
<dl>
<dt><strong>--trigger</strong> <em>&lt;trigger&gt;</em></dt><dd><p>Enable a trace event trigger to the previous <strong>-e</strong> <em>sys:event</em>.
If the <em>hist:</em> trigger is activated, the output histogram will be automatically saved to a file named <em>system_event_hist.txt</em>.
For example, the command:</p>
<p>rtla &lt;command&gt; &lt;mode&gt; -t -e osnoise:irq_noise --trigger=&quot;hist:key=desc,duration/1000:sort=desc,duration/1000:vals=hitcount&quot;</p>
<p>Will automatically save the content of the histogram associated to <em>osnoise:irq_noise</em> event in <em>osnoise_irq_noise_hist.txt</em>.</p>
<p>For further information about event trigger see <a class="reference external" href="https://www.kernel.org/doc/html/latest/trace/events.html#event-triggers">https://www.kernel.org/doc/html/latest/trace/events.html#event-triggers</a>.</p>
</dd>
</dl>
<p><strong>-P</strong>, <strong>--priority</strong> <em>o:prio|r:prio|f:prio|d:runtime:period</em></p>
<blockquote>
<div><p>Set scheduling parameters to the osnoise tracer threads, the format to set the priority are:</p>
<ul class="simple">
<li><p><em>o:prio</em> - use SCHED_OTHER with <em>prio</em>;</p></li>
<li><p><em>r:prio</em> - use SCHED_RR with <em>prio</em>;</p></li>
<li><p><em>f:prio</em> - use SCHED_FIFO with <em>prio</em>;</p></li>
<li><p><em>d:runtime[us|ms|s]:period[us|ms|s]</em> - use SCHED_DEADLINE with <em>runtime</em> and <em>period</em> in nanoseconds.</p></li>
</ul>
</div></blockquote>
<p><strong>-C</strong>, <strong>--cgroup</strong>[<em>=cgroup</em>]</p>
<blockquote>
<div><p>Set a <em>cgroup</em> to the tracer's threads. If the <strong>-C</strong> option is passed without arguments, the tracer's thread will inherit <strong>rtla</strong>'s <em>cgroup</em>. Otherwise, the threads will be placed on the <em>cgroup</em> passed to the option.</p>
</div></blockquote>
<p><strong>--warm-up</strong> <em>s</em></p>
<blockquote>
<div><p>After starting the workload, let it run for <em>s</em> seconds before starting collecting the data, allowing the system to warm-up. Statistical data generated during warm-up is discarded.</p>
</div></blockquote>
<dl class="simple">
<dt><strong>--trace-buffer-size</strong> <em>kB</em></dt><dd><p>Set the per-cpu trace buffer size in kB for the tracing output.</p>
</dd>
</dl>
<p><strong>--on-threshold</strong> <em>action</em></p>
<blockquote>
<div><p>Defines an action to be executed when tracing is stopped on a latency threshold
specified by <strong>-a/--auto</strong>, <strong>-i/--irq</strong>, or <strong>-T/--thread</strong>.</p>
<p>Multiple --on-threshold actions may be specified, and they will be executed in
the order they are provided. If any action fails, subsequent actions in the list
will not be executed.</p>
<p>Supported actions are:</p>
<ul>
<li><p><em>trace[,file=&lt;filename&gt;]</em></p>
<p>Saves trace output, optionally taking a filename. Alternative to -t/--trace.
Note that nlike -t/--trace, specifying this multiple times will result in
the trace being saved multiple times.</p>
</li>
<li><p><em>signal,num=&lt;sig&gt;,pid=&lt;pid&gt;</em></p>
<p>Sends signal to process. &quot;parent&quot; might be specified in place of pid to target
the parent process of rtla.</p>
</li>
<li><p><em>shell,command=&lt;command&gt;</em></p>
<p>Execute shell command.</p>
</li>
<li><p><em>continue</em></p>
<p>Continue tracing after actions are executed instead of stopping.</p>
</li>
</ul>
<p>Example:</p>
<p>$ rtla timerlat top -T 20 --on-threshold trace
--on-threshold shell,command=&quot;grep ipi_send timerlat_trace.txt&quot;
--on-threshold signal,num=2,pid=parent</p>
<p>This will save a trace with the default filename &quot;timerlat_trace.txt&quot;, print its
lines that contain the text &quot;ipi_send&quot; on standard output, and send signal 2
(SIGINT) to the parent process.</p>
<p>Performance Considerations:</p>
<p>For time-sensitive actions, it is recommended to run <strong>rtla timerlat</strong> with BPF
support and RT priority. Note that due to implementational limitations, actions
might be delayed up to one second after tracing is stopped if BPF mode is not
available or disabled.</p>
</div></blockquote>
<p><strong>--on-end</strong> <em>action</em></p>
<blockquote>
<div><p>Defines an action to be executed at the end of tracing.</p>
<p>Multiple --on-end actions can be specified, and they will be executed in the order
they are provided. If any action fails, subsequent actions in the list will not be
executed.</p>
<p>See the documentation for <strong>--on-threshold</strong> for the list of supported actions, with
the exception that <em>continue</em> has no effect.</p>
<p>Example:</p>
<p>$ rtla timerlat top -d 5s --on-end trace</p>
<p>This runs rtla with the default options, and saves trace output at the end.</p>
</div></blockquote>
<p><strong>-h</strong>, <strong>--help</strong></p>
<blockquote>
<div><p>Print help menu.</p>
</div></blockquote>
<p><strong>--dump-tasks</strong></p>
<blockquote>
<div><p>prints the task running on all CPUs if stop conditions are met (depends on !--no-aa)</p>
</div></blockquote>
<p><strong>--no-aa</strong></p>
<blockquote>
<div><p>disable auto-analysis, reducing rtla timerlat cpu usage</p>
</div></blockquote>
<p><strong>--aa-only</strong> <em>us</em></p>
<blockquote>
<div><p>Set stop tracing conditions and run without collecting and displaying statistics.
Print the auto-analysis if the system hits the stop tracing condition. This option
is useful to reduce rtla timerlat CPU, enabling the debug without the overhead of
collecting the statistics.</p>
</div></blockquote>
</section>
<section id="example">
<h3>EXAMPLE<a class="headerlink" href="#example" title="連結到這個標頭">¶</a></h3>
<p>In the example below, the timerlat tracer is dispatched in cpus <em>1-23</em> in the
automatic trace mode, instructing the tracer to stop if a <em>40 us</em> latency or
higher is found:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># timerlat -a 40 -c 1-23 -q
                                   Timer Latency
  0 00:00:12   |          IRQ Timer Latency (us)        |         Thread Timer Latency (us)
CPU COUNT      |      cur       min       avg       max |      cur       min       avg       max
  1 #12322     |        0         0         1        15 |       10         3         9        31
  2 #12322     |        3         0         1        12 |       10         3         9        23
  3 #12322     |        1         0         1        21 |        8         2         8        34
  4 #12322     |        1         0         1        17 |       10         2        11        33
  5 #12322     |        0         0         1        12 |        8         3         8        25
  6 #12322     |        1         0         1        14 |       16         3        11        35
  7 #12322     |        0         0         1        14 |        9         2         8        29
  8 #12322     |        1         0         1        22 |        9         3         9        34
  9 #12322     |        0         0         1        14 |        8         2         8        24
 10 #12322     |        1         0         0        12 |        9         3         8        24
 11 #12322     |        0         0         0        15 |        6         2         7        29
 12 #12321     |        1         0         0        13 |        5         3         8        23
 13 #12319     |        0         0         1        14 |        9         3         9        26
 14 #12321     |        1         0         0        13 |        6         2         8        24
 15 #12321     |        1         0         1        15 |       12         3        11        27
 16 #12318     |        0         0         1        13 |        7         3        10        24
 17 #12319     |        0         0         1        13 |       11         3         9        25
 18 #12318     |        0         0         0        12 |        8         2         8        20
 19 #12319     |        0         0         1        18 |       10         2         9        28
 20 #12317     |        0         0         0        20 |        9         3         8        34
 21 #12318     |        0         0         0        13 |        8         3         8        28
 22 #12319     |        0         0         1        11 |        8         3        10        22
 23 #12320     |       28         0         1        28 |       41         3        11        41
rtla timerlat hit stop tracing
## CPU 23 hit stop tracing, analyzing it ##
IRQ handler delay:                                        27.49 us (65.52 %)
IRQ latency:                                              28.13 us
Timerlat IRQ duration:                                     9.59 us (22.85 %)
Blocking thread:                                           3.79 us (9.03 %)
                       objtool:49256                       3.79 us
  Blocking thread stacktrace
              -&gt; timerlat_irq
              -&gt; __hrtimer_run_queues
              -&gt; hrtimer_interrupt
              -&gt; __sysvec_apic_timer_interrupt
              -&gt; sysvec_apic_timer_interrupt
              -&gt; asm_sysvec_apic_timer_interrupt
              -&gt; _raw_spin_unlock_irqrestore
              -&gt; cgroup_rstat_flush_locked
              -&gt; cgroup_rstat_flush_irqsafe
              -&gt; mem_cgroup_flush_stats
              -&gt; mem_cgroup_wb_stats
              -&gt; balance_dirty_pages
              -&gt; balance_dirty_pages_ratelimited_flags
              -&gt; btrfs_buffered_write
              -&gt; btrfs_do_write_iter
              -&gt; vfs_write
              -&gt; __x64_sys_pwrite64
              -&gt; do_syscall_64
              -&gt; entry_SYSCALL_64_after_hwframe
------------------------------------------------------------------------
  Thread latency:                                          41.96 us (100%)

The system has exit from idle latency!
  Max timerlat IRQ latency from idle: 17.48 us in cpu 4
Saving trace to timerlat_trace.txt
</pre></div>
</div>
<p>In this case, the major factor was the delay suffered by the <em>IRQ handler</em>
that handles <strong>timerlat</strong> wakeup: <em>65.52%</em>. This can be caused by the
current thread masking interrupts, which can be seen in the blocking
thread stacktrace: the current thread (<em>objtool:49256</em>) disabled interrupts
via <em>raw spin lock</em> operations inside mem cgroup, while doing write
syscall in a btrfs file system.</p>
<p>The raw trace is saved in the <strong>timerlat_trace.txt</strong> file for further analysis.</p>
<p>Note that <strong>rtla timerlat</strong> was dispatched without changing <em>timerlat</em> tracer
threads' priority. That is generally not needed because these threads have
priority <em>FIFO:95</em> by default, which is a common priority used by real-time
kernel developers to analyze scheduling delays.</p>
<section id="see-also">
<h4>SEE ALSO<a class="headerlink" href="#see-also" title="連結到這個標頭">¶</a></h4>
<p><strong>rtla-timerlat</strong>(1), <strong>rtla-timerlat-hist</strong>(1)</p>
<p><em>timerlat</em> tracer documentation: &lt;<a class="reference external" href="https://www.kernel.org/doc/html/latest/trace/timerlat-tracer.html">https://www.kernel.org/doc/html/latest/trace/timerlat-tracer.html</a>&gt;</p>
</section>
<section id="author">
<h4>AUTHOR<a class="headerlink" href="#author" title="連結到這個標頭">¶</a></h4>
<p>Written by Daniel Bristot de Oliveira &lt;<a class="reference external" href="mailto:bristot&#37;&#52;&#48;kernel&#46;org">bristot<span>&#64;</span>kernel<span>&#46;</span>org</a>&gt;</p>
</section>
</section>
<section id="exit-status">
<h3>EXIT STATUS<a class="headerlink" href="#exit-status" title="連結到這個標頭">¶</a></h3>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0  Passed: the test did not hit the stop tracing condition
1  Error: invalid argument
2  Failed: the test hit the stop tracing condition
</pre></div>
</div>
</section>
<section id="reporting-bugs">
<h3>REPORTING BUGS<a class="headerlink" href="#reporting-bugs" title="連結到這個標頭">¶</a></h3>
<p>Report bugs to &lt;<a class="reference external" href="mailto:linux-kernel&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-kernel<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a>&gt;
and &lt;<a class="reference external" href="mailto:linux-trace-devel&#37;&#52;&#48;vger&#46;kernel&#46;org">linux-trace-devel<span>&#64;</span>vger<span>&#46;</span>kernel<span>&#46;</span>org</a>&gt;</p>
</section>
<section id="license">
<h3>LICENSE<a class="headerlink" href="#license" title="連結到這個標頭">¶</a></h3>
<p><strong>rtla</strong> is Free Software licensed under the GNU GPLv2</p>
</section>
<section id="copying">
<h3>COPYING<a class="headerlink" href="#copying" title="連結到這個標頭">¶</a></h3>
<p>Copyright (C) 2021 Red Hat, Inc. Free use of this software is granted under
the terms of the GNU Public License (GPL).</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/tools/rtla/rtla-timerlat-top.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>