<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>GPIO_V2_GET_LINEINFO_WATCH_IOCTL &#8212; The Linux Kernel unknown version 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=b446b479"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/userspace-api/gpio/gpio-v2-get-lineinfo-watch-ioctl.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="GPIO_GET_LINEINFO_UNWATCH_IOCTL" href="gpio-get-lineinfo-unwatch-ioctl.html" />
    <link rel="prev" title="GPIO_V2_GET_LINEINFO_IOCTL" href="gpio-v2-get-lineinfo-ioctl.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.19.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">子系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">即時補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">使用者空間 API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#system-calls">System calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#security-related-interfaces">Security-related interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#devices-and-i-o">Devices and I/O</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../accelerators/ocxl.html">OpenCAPI (Open Coherent Accelerator Processor Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dma-buf-heaps.html">Allocating dma-buf using heaps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dma-buf-alloc-exchange.html">Exchanging pixel buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fwctl/index.html">Firmware Control (FWCTL) Userspace API</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iommufd.html">IOMMUFD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../media/index.html">Linux Media Infrastructure userspace API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vduse.html">VDUSE - &quot;vDPA Device in Userspace&quot;</a></li>
<li class="toctree-l3"><a class="reference internal" href="../isapnp.html">ISA Plug &amp; Play support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#everything-else">Everything else</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/userspace-api/gpio/gpio-v2-get-lineinfo-watch-ioctl.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="gpio-v2-get-lineinfo-watch-ioctl">
<span id="id1"></span><h1>GPIO_V2_GET_LINEINFO_WATCH_IOCTL<a class="headerlink" href="#gpio-v2-get-lineinfo-watch-ioctl" title="連結到這個標頭">¶</a></h1>
<section id="name">
<h2>Name<a class="headerlink" href="#name" title="連結到這個標頭">¶</a></h2>
<p>GPIO_V2_GET_LINEINFO_WATCH_IOCTL - Enable watching a line for changes to its
request state and configuration information.</p>
</section>
<section id="synopsis">
<h2>概要<a class="headerlink" href="#synopsis" title="連結到這個標頭">¶</a></h2>
<dl class="c macro">
<dt class="sig sig-object c" id="c.GPIO_V2_GET_LINEINFO_WATCH_IOCTL">
<span class="sig-name descname"><span class="n"><span class="pre">GPIO_V2_GET_LINEINFO_WATCH_IOCTL</span></span></span><a class="headerlink" href="#c.GPIO_V2_GET_LINEINFO_WATCH_IOCTL" title="連結到這個定義">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">ioctl(int</span> <span class="pre">chip_fd,</span> <span class="pre">GPIO_V2_GET_LINEINFO_WATCH_IOCTL,</span> <span class="pre">struct</span> <span class="pre">gpio_v2_line_info</span> <span class="pre">*info)</span></code></p>
</section>
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="連結到這個標頭">¶</a></h2>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">chip_fd</span></code></dt><dd><p>The file descriptor of the GPIO character device returned by <cite>open()</cite>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info</span></code></dt><dd><p>The <a class="reference internal" href="chardev.html#c.gpio_v2_line_info" title="gpio_v2_line_info"><code class="xref c c-type docutils literal notranslate"><span class="pre">line_info</span></code></a> <code class="xref c c-struct broken_xref docutils literal notranslate"><span class="pre">struct</span> <span class="pre">to</span></code> be populated, with
the <code class="docutils literal notranslate"><span class="pre">offset</span></code> set to indicate the line to watch</p>
</dd>
</dl>
</section>
<section id="description">
<h2>描述<a class="headerlink" href="#description" title="連結到這個標頭">¶</a></h2>
<p>Enable watching a line for changes to its request state and configuration
information. Changes to line info include a line being requested, released
or reconfigured.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>Watching line info is not generally required, and would typically only be
used by a system monitoring component.</p>
<p>The line info does NOT include the line value.
The line must be requested using <a class="reference internal" href="gpio-v2-get-line-ioctl.html"><span class="doc">GPIO_V2_GET_LINE_IOCTL</span></a> to access
its value, and the line request can monitor a line for events using
<a class="reference internal" href="gpio-v2-line-event-read.html"><span class="doc">GPIO_V2_LINE_EVENT_READ</span></a>.</p>
</div>
<p>By default all lines are unwatched when the GPIO chip is opened.</p>
<p>Multiple lines may be watched simultaneously by adding a watch for each.</p>
<p>Once a watch is set, any changes to line info will generate events which can be
read from the <code class="docutils literal notranslate"><span class="pre">chip_fd</span></code> as described in
<a class="reference internal" href="gpio-v2-lineinfo-changed-read.html"><span class="doc">GPIO_V2_LINEINFO_CHANGED_READ</span></a>.</p>
<p>Adding a watch to a line that is already watched is an error (<strong>EBUSY</strong>).</p>
<p>Watches are specific to the <code class="docutils literal notranslate"><span class="pre">chip_fd</span></code> and are independent of watches
on the same GPIO chip opened with a separate call to <cite>open()</cite>.</p>
</section>
<section id="return-value">
<h2>Return Value<a class="headerlink" href="#return-value" title="連結到這個標頭">¶</a></h2>
<p>On success 0 and <code class="docutils literal notranslate"><span class="pre">info</span></code> is populated with the current line info.</p>
<p>On error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set appropriately.
Common error codes are described in <a class="reference internal" href="error-codes.html"><span class="doc">GPIO Error Codes</span></a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/userspace-api/gpio/gpio-v2-get-lineinfo-watch-ioctl.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>