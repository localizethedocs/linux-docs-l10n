<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Devlink E-Switch Attribute &#8212; The Linux Kernel  說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=0d9984b1"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/networking/devlink/devlink-eswitch-attr.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="Devlink Flash" href="devlink-flash.html" />
    <link rel="prev" title="Devlink DPIPE" href="devlink-dpipe.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.18.0-rc2</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">子系統</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/networking/devlink/devlink-eswitch-attr.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="devlink-e-switch-attribute">
<h1>Devlink E-Switch Attribute<a class="headerlink" href="#devlink-e-switch-attribute" title="連結到這個標頭">¶</a></h1>
<p>Devlink E-Switch supports two modes of operation: legacy and switchdev.
Legacy mode operates based on traditional MAC/VLAN steering rules. Switching
decisions are made based on MAC addresses, VLANs, etc. There is limited ability
to offload switching rules to hardware.</p>
<p>On the other hand, switchdev mode allows for more advanced offloading
capabilities of the E-Switch to hardware. In switchdev mode, more switching
rules and logic can be offloaded to the hardware switch ASIC. It enables
representor netdevices that represent the slow path of virtual functions (VFs)
or scalable-functions (SFs) of the device. See more information about
<a class="reference internal" href="../switchdev.html#switchdev"><span class="std std-ref">Documentation/networking/switchdev.rst</span></a> and
<a class="reference internal" href="../representors.html#representors"><span class="std std-ref">Documentation/networking/representors.rst</span></a>.</p>
<p>In addition, the devlink E-Switch also comes with other attributes listed
in the following section.</p>
<section id="attributes-description">
<h2>Attributes Description<a class="headerlink" href="#attributes-description" title="連結到這個標頭">¶</a></h2>
<p>The following is a list of E-Switch attributes.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">E-Switch attributes</span><a class="headerlink" href="#id1" title="連結到這個表格">¶</a></caption>
<colgroup>
<col style="width: 13.8%" />
<col style="width: 8.6%" />
<col style="width: 77.6%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Type</p></td>
<td><p>描述</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">mode</span></code></p></td>
<td><p>enum</p></td>
<td><p>The mode of the device. The mode can be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">legacy</span></code> operates based on traditional MAC/VLAN steering
rules.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">switchdev</span></code> allows for more advanced offloading capabilities of
the E-Switch to hardware.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">inline-mode</span></code></p></td>
<td><p>enum</p></td>
<td><p>Some HWs need the VF driver to put part of the packet
headers on the TX descriptor so the e-switch can do proper
matching and steering. Support for both switchdev mode and legacy mode.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code> none.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">link</span></code> L2 mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">network</span></code> L3 mode.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transport</span></code> L4 mode.</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">encap-mode</span></code></p></td>
<td><p>enum</p></td>
<td><p>The encapsulation mode of the device. Support for both switchdev mode
and legacy mode. The mode can be one of the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code> Disable encapsulation support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">basic</span></code> Enable encapsulation support.</p></li>
</ul>
</td>
</tr>
</tbody>
</table>
</section>
<section id="example-usage">
<h2>Example Usage<a class="headerlink" href="#example-usage" title="連結到這個標頭">¶</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># enable switchdev mode</span>
$<span class="w"> </span>devlink<span class="w"> </span>dev<span class="w"> </span>eswitch<span class="w"> </span><span class="nb">set</span><span class="w"> </span>pci/0000:08:00.0<span class="w"> </span>mode<span class="w"> </span>switchdev

<span class="c1"># set inline-mode and encap-mode</span>
$<span class="w"> </span>devlink<span class="w"> </span>dev<span class="w"> </span>eswitch<span class="w"> </span><span class="nb">set</span><span class="w"> </span>pci/0000:08:00.0<span class="w"> </span>inline-mode<span class="w"> </span>none<span class="w"> </span>encap-mode<span class="w"> </span>basic

<span class="c1"># display devlink device eswitch attributes</span>
$<span class="w"> </span>devlink<span class="w"> </span>dev<span class="w"> </span>eswitch<span class="w"> </span>show<span class="w"> </span>pci/0000:08:00.0
<span class="w">  </span>pci/0000:08:00.0:<span class="w"> </span>mode<span class="w"> </span>switchdev<span class="w"> </span>inline-mode<span class="w"> </span>none<span class="w"> </span>encap-mode<span class="w"> </span>basic

<span class="c1"># enable encap-mode with legacy mode</span>
$<span class="w"> </span>devlink<span class="w"> </span>dev<span class="w"> </span>eswitch<span class="w"> </span><span class="nb">set</span><span class="w"> </span>pci/0000:08:00.0<span class="w"> </span>mode<span class="w"> </span>legacy<span class="w"> </span>inline-mode<span class="w"> </span>none<span class="w"> </span>encap-mode<span class="w"> </span>basic
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/networking/devlink/devlink-eswitch-attr.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>