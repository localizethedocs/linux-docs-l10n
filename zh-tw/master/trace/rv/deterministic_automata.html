<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Deterministic Automata &#8212; The Linux Kernel unknown version 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../_static/documentation_options.js?v=b446b479"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/trace/rv/deterministic_automata.html" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜尋" href="../../search.html" />
    <link rel="next" title="Linear temporal logic" href="linear_temporal_logic.html" />
    <link rel="prev" title="Runtime Verification" href="runtime-verification.html" />

   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.19.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">子系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Tracing</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#introduction-to-tracing">Introduction to Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#core-tracing-frameworks">Core Tracing Frameworks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#event-tracing-and-analysis">Event Tracing and Analysis</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#hardware-and-performance-tracing">Hardware and Performance Tracing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../intel_th.html">Intel(R) Trace Hub (TH)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../stm.html">System Trace Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sys-t.html">MIPI SyS-T over STP</a></li>
<li class="toctree-l3"><a class="reference internal" href="../coresight/index.html">CoreSight - ARM Hardware Trace</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Runtime Verification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hisi-ptt.html">HiSilicon PCIe Tune and Trace device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmiotrace.html">In-kernel memory-mapped I/O tracing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hwlat_detector.html">Hardware Latency Detector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../osnoise-tracer.html">OSNOISE Tracer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../timerlat-tracer.html">Timerlat tracer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#user-space-tracing">User-Space Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">即時補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU 架構</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/trace/rv/deterministic_automata.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="deterministic-automata">
<h1>Deterministic Automata<a class="headerlink" href="#deterministic-automata" title="連結到這個標頭">¶</a></h1>
<p>Formally, a deterministic automaton, denoted by G, is defined as a quintuple:</p>
<blockquote>
<div><p><em>G</em> = { <em>X</em>, <em>E</em>, <em>f</em>, x<sub>0</sub>, X<sub>m</sub> }</p>
</div></blockquote>
<p>where:</p>
<ul class="simple">
<li><p><em>X</em> is the set of states;</p></li>
<li><p><em>E</em> is the finite set of events;</p></li>
<li><p>x<sub>0</sub> is the initial state;</p></li>
<li><p>X<sub>m</sub> (subset of <em>X</em>) is the set of marked (or final) states.</p></li>
<li><p><em>f</em> : <em>X</em> x <em>E</em> -&gt; <em>X</em> $ is the transition function. It defines the state
transition in the occurrence of an event from <em>E</em> in the state <em>X</em>. In the
special case of deterministic automata, the occurrence of the event in <em>E</em>
in a state in <em>X</em> has a deterministic next state from <em>X</em>.</p></li>
</ul>
<p>For example, a given automaton named 'wip' (wakeup in preemptive) can
be defined as:</p>
<ul class="simple">
<li><p><em>X</em> = { <code class="docutils literal notranslate"><span class="pre">preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>}</p></li>
<li><p><em>E</em> = { <code class="docutils literal notranslate"><span class="pre">preempt_enable</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_disable</span></code>, <code class="docutils literal notranslate"><span class="pre">sched_waking</span></code>}</p></li>
<li><p>x<sub>0</sub> = <code class="docutils literal notranslate"><span class="pre">preemptive</span></code></p></li>
<li><p>X<sub>m</sub> = {<code class="docutils literal notranslate"><span class="pre">preemptive</span></code>}</p></li>
<li><dl class="simple">
<dt><em>f</em> =</dt><dd><ul>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_disable</span></code>) = <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code></p></li>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">sched_waking</span></code>) = <code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code></p></li>
<li><p><em>f</em>(<code class="docutils literal notranslate"><span class="pre">non_preemptive</span></code>, <code class="docutils literal notranslate"><span class="pre">preempt_enable</span></code>) = <code class="docutils literal notranslate"><span class="pre">preemptive</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>One of the benefits of this formal definition is that it can be presented
in multiple formats. For example, using a <em>graphical representation</em>, using
vertices (nodes) and edges, which is very intuitive for <em>operating system</em>
practitioners, without any loss.</p>
<p>The previous 'wip' automaton can also be represented as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                   preempt_enable
      +---------------------------------+
      v                                 |
    #============#  preempt_disable   +------------------+
--&gt; H preemptive H -----------------&gt; |  non_preemptive  |
    #============#                    +------------------+
                                        ^              |
                                        | sched_waking |
                                        +--------------+
</pre></div>
</div>
<section id="deterministic-automaton-in-c">
<h2>Deterministic Automaton in C<a class="headerlink" href="#deterministic-automaton-in-c" title="連結到這個標頭">¶</a></h2>
<p>In the paper &quot;Efficient formal verification for the Linux kernel&quot;,
the authors present a simple way to represent an automaton in C that can
be used as regular code in the Linux kernel.</p>
<p>For example, the 'wip' automata can be presented as (augmented with comments):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/* enum representation of X (set of states) to be used as index */
enum states {
      preemptive = 0,
      non_preemptive,
      state_max
};

#define INVALID_STATE state_max

/* enum representation of E (set of events) to be used as index */
enum events {
      preempt_disable = 0,
      preempt_enable,
      sched_waking,
      event_max
};

struct automaton {
      char *state_names[state_max];                   // X: the set of states
      char *event_names[event_max];                   // E: the finite set of events
      unsigned char function[state_max][event_max];   // f: transition function
      unsigned char initial_state;                    // x_0: the initial state
      bool final_states[state_max];                   // X_m: the set of marked states
};

struct automaton aut = {
      .state_names = {
              &quot;preemptive&quot;,
              &quot;non_preemptive&quot;
      },
      .event_names = {
              &quot;preempt_disable&quot;,
              &quot;preempt_enable&quot;,
              &quot;sched_waking&quot;
      },
      .function = {
              { non_preemptive,  INVALID_STATE,  INVALID_STATE },
              {  INVALID_STATE,     preemptive, non_preemptive },
      },
      .initial_state = preemptive,
      .final_states = { 1, 0 },
};
</pre></div>
</div>
<p>The <em>transition function</em> is represented as a matrix of states (lines) and
events (columns), and so the function <em>f</em> : <em>X</em> x <em>E</em> -&gt; <em>X</em> can be solved
in O(1). For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>next_state = automaton_wip.function[curr_state][event];
</pre></div>
</div>
</section>
<section id="graphviz-dot-format">
<h2>Graphviz .dot format<a class="headerlink" href="#graphviz-dot-format" title="連結到這個標頭">¶</a></h2>
<p>The Graphviz open-source tool can produce the graphical representation
of an automaton using the (textual) DOT language as the source code.
The DOT format is widely used and can be converted to many other formats.</p>
<p>For example, this is the 'wip' model in DOT:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>digraph state_automaton {
      {node [shape = circle] &quot;non_preemptive&quot;};
      {node [shape = plaintext, style=invis, label=&quot;&quot;] &quot;__init_preemptive&quot;};
      {node [shape = doublecircle] &quot;preemptive&quot;};
      {node [shape = circle] &quot;preemptive&quot;};
      &quot;__init_preemptive&quot; -&gt; &quot;preemptive&quot;;
      &quot;non_preemptive&quot; [label = &quot;non_preemptive&quot;];
      &quot;non_preemptive&quot; -&gt; &quot;non_preemptive&quot; [ label = &quot;sched_waking&quot; ];
      &quot;non_preemptive&quot; -&gt; &quot;preemptive&quot; [ label = &quot;preempt_enable&quot; ];
      &quot;preemptive&quot; [label = &quot;preemptive&quot;];
      &quot;preemptive&quot; -&gt; &quot;non_preemptive&quot; [ label = &quot;preempt_disable&quot; ];
      { rank = min ;
              &quot;__init_preemptive&quot;;
              &quot;preemptive&quot;;
      }
}
</pre></div>
</div>
<p>This DOT format can be transformed into a bitmap or vectorial image
using the dot utility, or into an ASCII art using graph-easy. For
instance:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot -Tsvg -o wip.svg wip.dot
$ graph-easy wip.dot &gt; wip.txt
</pre></div>
</div>
</section>
<section id="dot2c">
<h2>dot2c<a class="headerlink" href="#dot2c" title="連結到這個標頭">¶</a></h2>
<p>dot2c is a utility that can parse a .dot file containing an automaton as
in the example above and automatically convert it to the C representation
presented in [3].</p>
<p>For example, having the previous 'wip' model into a file named 'wip.dot',
the following command will transform the .dot file into the C
representation (previously shown) in the 'wip.h' file:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ dot2c wip.dot &gt; wip.h
</pre></div>
</div>
<p>The 'wip.h' content is the code sample in section 'Deterministic Automaton
in C'.</p>
</section>
<section id="remarks">
<h2>Remarks<a class="headerlink" href="#remarks" title="連結到這個標頭">¶</a></h2>
<p>The automata formalism allows modeling discrete event systems (DES) in
multiple formats, suitable for different applications/users.</p>
<p>For example, the formal description using set theory is better suitable
for automata operations, while the graphical format for human interpretation;
and computer languages for machine execution.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="連結到這個標頭">¶</a></h2>
<p>Many textbooks cover automata formalism. For a brief introduction see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>O&#39;Regan, Gerard. Concise guide to software engineering. Springer,
Cham, 2017.
</pre></div>
</div>
<p>For a detailed description, including operations, and application on Discrete
Event Systems (DES), see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Cassandras, Christos G., and Stephane Lafortune, eds. Introduction to discrete
event systems. Boston, MA: Springer US, 2008.
</pre></div>
</div>
<p>For the C representation in kernel, see:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>De Oliveira, Daniel Bristot; Cucinotta, Tommaso; De Oliveira, Romulo
Silva. Efficient formal verification for the Linux kernel. In:
International Conference on Software Engineering and Formal Methods.
Springer, Cham, 2019. p. 315-332.
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../_sources/trace/rv/deterministic_automata.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>