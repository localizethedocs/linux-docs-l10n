<!DOCTYPE html>

<html lang="zh-TW" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>30.1. General note on [U]EFI x86_64 support &#8212; The Linux Kernel unknown version 說明文件</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=adfc0c0d" />
    <script src="../../../_static/documentation_options.js?v=b446b479"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/translations.js?v=cbf116e0"></script>
    <link rel="canonical" href="https://projects.localizethedocs.org/linux-docs-l10n/arch/x86/x86_64/uefi.html" />
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜尋" href="../../../search.html" />
    <link rel="next" title="30.2. 記憶體管理" href="mm.html" />
    <link rel="prev" title="30. x86_64 Support" href="index.html" />

   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

<script type="text/javascript" src="../../../ltd-provenance.js"></script>
<script type="text/javascript" src="../../../ltd-current.js"></script>
<script type="text/javascript" src="../../../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../../../ltd-flyout.js"></script>

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.19.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜尋</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="前往" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>


<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">提交補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">維護者手冊</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">核心 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subsystem-apis.html">子系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">撰寫文件</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">開發工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">測試指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">即時補釘</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">建置系統</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/reporting-issues.html">回報議題</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">使用者空間工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">使用者空間 API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">韌體</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">韌體與裝置樹</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">CPU 架構</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../arc/index.html">ARC 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arm/index.html">ARM 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../arm64/index.html">ARM64 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../loongarch/index.html">LoongArch 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../m68k/index.html">m68k 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mips/index.html">MIPS-specific Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../nios2/index.html">Nios II Specific Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../openrisc/index.html">OpenRISC 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../parisc/index.html">PA-RISC 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../powerpc/index.html">powerpc</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../riscv/index.html">RISC-V 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../s390/index.html">s390 架構</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sparc/index.html">Sparc 架構</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">x86-specific Documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../boot.html">1. The Linux/x86 Boot Protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="../booting-dt.html">2. DeviceTree Booting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cpuinfo.html">3. x86 Feature Flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="../topology.html">4. x86 Topology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../exception-tables.html">5. Kernel level exception handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../kernel-stacks.html">6. Kernel Stacks</a></li>
<li class="toctree-l3"><a class="reference internal" href="../entry_64.html">7. Kernel Entries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../earlyprintk.html">8. Early Printk</a></li>
<li class="toctree-l3"><a class="reference internal" href="../orc-unwinder.html">9. ORC unwinder</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zero-page.html">10. Zero Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tlb.html">11. The TLB</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtrr.html">12. MTRR (Memory Type Range Register) control</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pat.html">13. PAT (Page Attribute Table)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel-hfi.html">14. Hardware-Feedback Interface for scheduling on Intel Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../shstk.html">15. Control-flow Enforcement Technology (CET) Shadow Stack</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iommu.html">16. x86 IOMMU Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../intel_txt.html">17. Intel(R) TXT Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../amd-debugging.html">18. Debugging AMD Zen systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../amd-memory-encryption.html">19. AMD Memory Encryption</a></li>
<li class="toctree-l3"><a class="reference internal" href="../amd_hsmp.html">20. AMD HSMP interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../amd-hfi.html">21. Hardware Feedback Interface For Hetero Core Scheduling On AMD Platform</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tdx.html">22. Intel Trust Domain Extensions (TDX)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pti.html">23. Page Table Isolation (PTI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mds.html">24. Microarchitectural Data Sampling (MDS) mitigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../microcode.html">25. The Linux Microcode Loader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tsx_async_abort.html">26. TSX Async Abort (TAA) mitigation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../buslock.html">27. Bus lock detection and handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usb-legacy-support.html">28. USB Legacy support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i386/index.html">29. i386 Support</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">30. x86_64 Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ifs.html">31. In-Field Scan</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sva.html">32. Shared Virtual Addressing (SVA) with ENQCMD</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sgx.html">33. Software Guard eXtensions (SGX)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../features.html">34. Feature status on x86 architecture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../elf_auxvec.html">35. x86-specific ELF Auxiliary Vectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xstate.html">36. Using XSTATE features in user space applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../xtensa/index.html">Xtensa 架構</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">未排序的文件</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/arch/x86/x86_64/uefi.rst.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="general-note-on-u-efi-x86-64-support">
<h1><span class="section-number">30.1. </span>General note on [U]EFI x86_64 support<a class="headerlink" href="#general-note-on-u-efi-x86-64-support" title="連結到這個標頭">¶</a></h1>
<p>The nomenclature EFI and UEFI are used interchangeably in this document.</p>
<p>Although the tools below are _not_ needed for building the kernel,
the needed bootloader support and associated tools for x86_64 platforms
with EFI firmware and specifications are listed below.</p>
<ol class="arabic simple">
<li><p>UEFI specification:  <a class="reference external" href="http://www.uefi.org">http://www.uefi.org</a></p></li>
<li><p>Booting Linux kernel on UEFI x86_64 platform can either be
done using the &lt;<a class="reference internal" href="../../../admin-guide/efi-stub.html"><span class="doc">The EFI Boot Stub</span></a>&gt; or using a
separate bootloader.</p></li>
<li><p>x86_64 platform with EFI/UEFI firmware.</p></li>
</ol>
<section id="mechanics">
<h2><span class="section-number">30.1.1. </span>Mechanics<a class="headerlink" href="#mechanics" title="連結到這個標頭">¶</a></h2>
<p>Refer to &lt;<a class="reference internal" href="../../../admin-guide/efi-stub.html"><span class="doc">The EFI Boot Stub</span></a>&gt; to learn how to use the EFI stub.</p>
<p>Below are general EFI setup guidelines on the x86_64 platform,
regardless of whether you use the EFI stub or a separate bootloader.</p>
<ul>
<li><p>Build the kernel with the following configuration:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_FB_EFI=y
CONFIG_FRAMEBUFFER_CONSOLE=y
</pre></div>
</div>
<p>If EFI runtime services are expected, the following configuration should
be selected:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CONFIG_EFI=y
CONFIG_EFIVAR_FS=y or m         # optional
</pre></div>
</div>
</li>
<li><dl>
<dt>Create a VFAT partition on the disk with the EFI System flag</dt><dd><p>You can do this with fdisk with the following commands:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>g - initialize a GPT partition table</p></li>
<li><p>n - create a new partition</p></li>
<li><p>t - change the partition type to &quot;EFI System&quot; (number 1)</p></li>
<li><p>w - write and save the changes</p></li>
</ol>
</div></blockquote>
<p>Afterwards, initialize the VFAT filesystem by running mkfs:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mkfs.fat /dev/&lt;your-partition&gt;
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt>Copy the boot files to the VFAT partition:</dt><dd><p>If you use the EFI stub method, the kernel acts also as an EFI executable.</p>
<p>You can just copy the bzImage to the EFI/boot/bootx64.efi path on the partition
so that it will automatically get booted, see the &lt;<a class="reference internal" href="../../../admin-guide/efi-stub.html"><span class="doc">The EFI Boot Stub</span></a>&gt; page
for additional instructions regarding passage of kernel parameters and initramfs.</p>
<p>If you use a custom bootloader, refer to the relevant documentation for help on this part.</p>
</dd>
</dl>
</li>
<li><p>If some or all EFI runtime services don't work, you can try following
kernel command line parameters to turn off some or all EFI runtime
services.</p>
<blockquote>
<div><dl class="simple">
<dt>noefi</dt><dd><p>turn off all EFI runtime services</p>
</dd>
<dt>reboot_type=k</dt><dd><p>turn off EFI reboot runtime service</p>
</dd>
</dl>
</div></blockquote>
</li>
<li><p>If the EFI memory map has additional entries not in the E820 map,
you can include those entries in the kernels memory map of available
physical RAM by using the following kernel command line parameter.</p>
<blockquote>
<div><dl class="simple">
<dt>add_efi_memmap</dt><dd><p>include EFI memory map of available physical RAM</p>
</dd>
</dl>
</div></blockquote>
</li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="../../../_sources/arch/x86/x86_64/uefi.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>