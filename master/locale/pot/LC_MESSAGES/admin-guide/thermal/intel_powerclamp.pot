# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel master\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-27 13:53+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../admin-guide/thermal/intel_powerclamp.rst:3
msgid "Intel Powerclamp Driver"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:5
msgid "By:"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:6
msgid "Arjan van de Ven <arjan@linux.intel.com>"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:7
msgid "Jacob Pan <jacob.jun.pan@linux.intel.com>"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:32
msgid "INTRODUCTION"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:34
msgid ""
"Consider the situation where a system’s power consumption must be reduced at "
"runtime, due to power budget, thermal constraint, or noise level, and where "
"active cooling is not preferred. Software managed passive power reduction "
"must be performed to prevent the hardware actions that are designed for "
"catastrophic scenarios."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:40
msgid ""
"Currently, P-states, T-states (clock modulation), and CPU offlining are used "
"for CPU throttling."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:43
msgid ""
"On Intel CPUs, C-states provide effective power reduction, but so far "
"they’re only used opportunistically, based on workload. With the development "
"of intel_powerclamp driver, the method of synchronizing idle injection "
"across all online CPU threads was introduced. The goal is to achieve forced "
"and controllable C-state residency."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:49
msgid ""
"Test/Analysis has been made in the areas of power, performance, scalability, "
"and user experience. In many cases, clear advantage is shown over taking the "
"CPU offline or modulating the CPU clock."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:55
msgid "THEORY OF OPERATION"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:58
msgid "Idle Injection"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:60
msgid ""
"On modern Intel processors (Nehalem or later), package level C-state "
"residency is available in MSRs, thus also available to the kernel."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:63
msgid "These MSRs are::"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:70
msgid ""
"If the kernel can also inject idle time to the system, then a closed-loop "
"control system can be established that manages package level C-state. The "
"intel_powerclamp driver is conceived as such a control system, where the "
"target set point is a user-selected idle ratio (based on power reduction), "
"and the error is the difference between the actual package level C-state "
"residency ratio and the target idle ratio."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:78
msgid ""
"Injection is controlled by high priority kernel threads, spawned for each "
"online CPU."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:81
msgid ""
"These kernel threads, with SCHED_FIFO class, are created to perform clamping "
"actions of controlled duty ratio and duration. Each per-CPU thread "
"synchronizes its idle time and duration, based on the rounding of jiffies, "
"so accumulated errors can be prevented to avoid a jittery effect. Threads "
"are also bound to the CPU such that they cannot be migrated, unless the CPU "
"is taken offline. In this case, threads belong to the offlined CPUs will be "
"terminated immediately."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:89
msgid ""
"Running as SCHED_FIFO and relatively high priority, also allows such scheme "
"to work for both preemptible and non-preemptible kernels. Alignment of idle "
"time around jiffies ensures scalability for HZ values. This effect can be "
"better visualized using a Perf timechart. The following diagram shows the "
"behavior of kernel thread kidle_inject/cpu. During idle injection, it runs "
"monitor/mwait idle for a given \"duration\", then relinquishes the CPU to "
"other tasks, until the next time interval."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:98
msgid ""
"The NOHZ schedule tick is disabled during idle time, but interrupts are not "
"masked. Tests show that the extra wakeups from scheduler tick have a "
"dramatic impact on the effectiveness of the powerclamp driver on large scale "
"systems (Westmere system with 80 processors)."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:119
msgid ""
"Only one CPU is allowed to collect statistics and update global control "
"parameters. This CPU is referred to as the controlling CPU in this document. "
"The controlling CPU is elected at runtime, with a policy that favors BSP, "
"taking into account the possibility of a CPU hot-plug."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:125
msgid ""
"In terms of dynamics of the idle control system, package level idle time is "
"considered largely as a non-causal system where its behavior cannot be based "
"on the past or current input. Therefore, the intel_powerclamp driver "
"attempts to enforce the desired idle time instantly as given input (target "
"idle ratio). After injection, powerclamp monitors the actual idle for a "
"given time window and adjust the next injection accordingly to avoid over/"
"under correction."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:133
msgid ""
"When used in a causal control system, such as a temperature control, it is "
"up to the user of this driver to implement algorithms where past samples and "
"outputs are included in the feedback. For example, a PID-based thermal "
"controller can use the powerclamp driver to maintain a desired target "
"temperature, based on integral and derivative gains of the past samples."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:143
msgid "Calibration"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:144
msgid ""
"During scalability testing, it is observed that synchronized actions among "
"CPUs become challenging as the number of cores grows. This is also true for "
"the ability of a system to enter package level C-states."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:148
msgid ""
"To make sure the intel_powerclamp driver scales well, online calibration is "
"implemented. The goals for doing such a calibration are:"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:152
msgid "determine the effective range of idle injection ratio"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:153
msgid "determine the amount of compensation needed at each target ratio"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:155
msgid "Compensation to each target ratio consists of two parts:"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:157
msgid "steady state error compensation"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:159
msgid ""
"This is to offset the error occurring when the system can enter idle without "
"extra wakeups (such as external interrupts)."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:162
msgid "dynamic error compensation"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:164
msgid ""
"When an excessive amount of wakeups occurs during idle, an additional idle "
"ratio can be added to quiet interrupts, by slowing down CPU activities."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:168
msgid ""
"A debugfs file is provided for the user to examine compensation progress and "
"results, such as on a Westmere system::"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:206
msgid ""
"Calibration occurs during runtime. No offline method is available. Steady "
"state compensation is used only when confidence levels of all adjacent "
"ratios have reached satisfactory level. A confidence level is accumulated "
"based on clean data collected at runtime. Data collected during a period "
"without extra interrupts is considered clean."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:213
msgid ""
"To compensate for excessive amounts of wakeup during idle, additional idle "
"time is injected when such a condition is detected. Currently, we have a "
"simple algorithm to double the injection ratio. A possible enhancement might "
"be to throttle the offending IRQ, such as delaying EOI for level triggered "
"interrupts. But it is a challenge to be non-intrusive to the scheduler or "
"the IRQ core code."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:222
msgid "CPU Online/Offline"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:223
msgid ""
"Per-CPU kernel threads are started/stopped upon receiving notifications of "
"CPU hotplug activities. The intel_powerclamp driver keeps track of clamping "
"kernel threads, even after they are migrated to other CPUs, after a CPU "
"offline event."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:230
msgid "Performance Analysis"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:231
msgid ""
"This section describes the general performance data collected on multiple "
"systems, including Westmere (80P) and Ivy Bridge (4P, 8P)."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:235
msgid "Effectiveness and Limitations"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:236
msgid ""
"The maximum range that idle injection is allowed is capped at 50 percent. As "
"mentioned earlier, since interrupts are allowed during forced idle time, "
"excessive interrupts could result in less effectiveness. The extreme case "
"would be doing a ping -f to generated flooded network interrupts without "
"much CPU acknowledgement. In this case, little can be done from the idle "
"injection threads. In most normal cases, such as scp a large file, "
"applications can be throttled by the powerclamp driver, since slowing down "
"the CPU also slows down network protocol processing, which in turn reduces "
"interrupts."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:246
msgid ""
"When control parameters change at runtime by the controlling CPU, it may "
"take an additional period for the rest of the CPUs to catch up with the "
"changes. During this time, idle injection is out of sync, thus not able to "
"enter package C- states at the expected ratio. But this effect is minor, in "
"that in most cases change to the target ratio is updated much less "
"frequently than the idle injection frequency."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:255
msgid "Scalability"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:256
msgid ""
"Tests also show a minor, but measurable, difference between the 4P/8P Ivy "
"Bridge system and the 80P Westmere server under 50% idle ratio. More "
"compensation is needed on Westmere for the same amount of target idle ratio. "
"The compensation also increases as the idle ratio gets larger. The above "
"reason constitutes the need for the calibration code."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:263
msgid ""
"On the IVB 8P system, compared to an offline CPU, powerclamp can achieve up "
"to 40% better performance per watt. (measured by a spin counter summed over "
"per CPU counting threads spawned for all running CPUs)."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:269
msgid "Usage and Interfaces"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:270
msgid ""
"The powerclamp driver is registered to the generic thermal layer as a "
"cooling device. Currently, it’s not bound to any thermal zones::"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:278
msgid ""
"cur_state allows user to set the desired idle percentage. Writing 0 to "
"cur_state will stop idle injection. Writing a value between 1 and max_state "
"will start the idle injection. Reading cur_state returns the actual and "
"current idle percentage. This may not be the same value set by the user in "
"that current idle percentage depends on workload and includes natural idle. "
"When idle injection is disabled, reading cur_state returns value -1 instead "
"of 0 which is to avoid confusing 100% busy state with the disabled state."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:287
msgid "Example usage:"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:289
msgid "To inject 25% idle time::"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:293
msgid ""
"If the system is not busy and has more than 25% idle time already, then the "
"powerclamp driver will not start idle injection. Using Top will not show "
"idle injection kernel threads."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:297
msgid ""
"If the system is busy (spin test below) and has less than 25% natural idle "
"time, powerclamp kernel threads will do idle injection. Forced idle time is "
"accounted as normal idle in that common code path is taken as the idle task."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:302
msgid ""
"In this example, 24.1% idle is shown. This helps the system admin or user "
"determine the cause of slowdown, when a powerclamp driver is in action::"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:321
msgid ""
"Tests have shown that by using the powerclamp driver as a cooling device, a "
"PID based userspace thermal controller can manage to control CPU temperature "
"effectively, when no other thermal influence is added. For example, a "
"UltraBook user can compile the kernel under certain temperature (below most "
"active trip points)."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:328
msgid "Module Parameters"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:330
msgid "``cpumask`` (RW)"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:331
msgid ""
"A bit mask of CPUs to inject idle. The format of the bitmask is same as used "
"in other subsystems like in /proc/irq/\\*/smp_affinity. The mask is comma "
"separated 32 bit groups. Each CPU is one bit. For example for a 256 CPU "
"system the full mask is: ffffffff,ffffffff,ffffffff,ffffffff,ffffffff,"
"ffffffff,ffffffff,ffffffff"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:337
msgid "The rightmost mask is for CPU 0-32."
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:339
msgid "``max_idle`` (RW)"
msgstr ""

#: ../../../admin-guide/thermal/intel_powerclamp.rst:340
msgid ""
"Maximum injected idle time to the total CPU time ratio in percent range from "
"1 to 100. Even if the cooling device max_state is always 100 (100%), this "
"parameter allows to add a max idle percent limit. The default is 50, to "
"match the current implementation of powerclamp driver. Also doesn't allow "
"value more than 75, if the cpumask includes every CPU present in the system."
msgstr ""
