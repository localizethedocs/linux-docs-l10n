# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel master\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-09-27 13:53+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../power/swsusp-dmcrypt.rst:3
msgid "How to use dm-crypt and swsusp together"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:5
msgid "Author: Andreas Steinmetz <ast@domdv.de>"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:9
msgid ""
"Some prerequisites: You know how dm-crypt works. If not, visit the following "
"web page: http://www.saout.de/misc/dm-crypt/ You have read Documentation/"
"power/swsusp.rst and understand it. You did read Documentation/admin-guide/"
"initrd.rst and know how an initrd works. You know how to create or how to "
"modify an initrd."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:16
msgid ""
"Now your system is properly set up, your disk is encrypted except for the "
"swap device(s) and the boot partition which may contain a mini system for "
"crypto setup and/or rescue purposes. You may even have an initrd that does "
"your current crypto setup already."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:21
msgid ""
"At this point you want to encrypt your swap, too. Still you want to be able "
"to suspend using swsusp. This, however, means that you have to be able to "
"either enter a passphrase or that you read the key(s) from an external "
"device like a pcmcia flash disk or an usb stick prior to resume. So you need "
"an initrd, that sets up dm-crypt and then asks swsusp to resume from the "
"encrypted swap device."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:29
msgid ""
"The most important thing is that you set up dm-crypt in such a way that the "
"swap device you suspend to/resume from has always the same major/minor "
"within the initrd as well as within your running system. The easiest way to "
"achieve this is to always set up this swap device first with dmsetup, so "
"that it will always look like the following::"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:38
msgid ""
"Now set up your kernel to use /dev/mapper/swap0 as the default resume "
"partition, so your kernel .config contains::"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:43
msgid ""
"Prepare your boot loader to use the initrd you will create or modify. For "
"lilo the simplest setup looks like the following lines::"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:52
msgid ""
"Finally you need to create or modify your initrd. Lets assume you create an "
"initrd that reads the required dm-crypt setup from a pcmcia flash disk card. "
"The card is formatted with an ext2 fs which resides on /dev/hde1 when the "
"card is inserted. The card contains at least the encrypted swap setup in a "
"file named \"swapkey\". /etc/fstab of your initrd contains something like "
"the following::"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:64
msgid ""
"/dev/hda1 contains an unencrypted mini system that sets up all of your "
"crypto devices, again by reading the setup from the pcmcia flash disk. What "
"follows now is a /linuxrc for your initrd that allows you to resume from "
"encrypted swap and that continues boot with your mini system on /dev/hda1 if "
"resume does not happen::"
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:119
msgid ""
"Please don't mind the weird loop above, busybox's msh doesn't know the let "
"statement. Now, what is happening in the script? First we have to decide if "
"we want to try to resume, or not. We will not resume if booting with "
"\"noresume\" or any parameters for init like \"single\" or \"emergency\" as "
"boot parameters."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:125
msgid ""
"Then we need to set up dmcrypt with the setup data from the pcmcia flash "
"disk. If this succeeds we need to reset the swap device if we don't want to "
"resume. The line \"echo 254:0 > /sys/power/resume\" then attempts to resume "
"from the first device mapper device. Note that it is important to set the "
"device in /sys/power/resume, regardless if resuming or not, otherwise later "
"suspend will fail. If resume starts, script execution terminates here."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:133
msgid ""
"Otherwise we just remove the encrypted swap device and leave it to the mini "
"system on /dev/hda1 to set the whole crypto up (it is up to you to modify "
"this to your taste)."
msgstr ""

#: ../../../power/swsusp-dmcrypt.rst:137
msgid ""
"What then follows is the well known process to change the root file system "
"and continue booting from there. I prefer to unmount the initrd prior to "
"continue booting but it is up to you to modify this."
msgstr ""
