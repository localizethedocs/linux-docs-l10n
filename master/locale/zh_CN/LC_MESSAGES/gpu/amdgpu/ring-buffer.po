# SOME DESCRIPTIVE TITLE.
# Copyright (C) The kernel development community
# This file is distributed under the same license as the The Linux Kernel package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: The Linux Kernel master\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2026-02-16 08:44+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../gpu/amdgpu/ring-buffer.rst:3
msgid "Ring Buffer"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:5
msgid ""
"To handle communication between user space and kernel space, AMD GPUs use a "
"ring buffer design to feed the engines (GFX, Compute, SDMA, UVD, VCE, VCN, "
"VPE, etc.). See the figure below that illustrates how this communication "
"works:"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:11
msgid ""
"Ring buffers in the amdgpu work as a producer-consumer model, where "
"userspace acts as the producer, constantly filling the ring buffer with GPU "
"commands to be executed. Meanwhile, the GPU retrieves the information from "
"the ring, parses it, and distributes the specific set of instructions "
"between the different amdgpu blocks."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:17
msgid ""
"Notice from the diagram that the ring has a Read Pointer (rptr), which "
"indicates where the engine is currently reading packets from the ring, and a "
"Write Pointer (wptr), which indicates how many packets software has added to "
"the ring. When the rptr and wptr are equal, the ring is idle. When software "
"adds packets to the ring, it updates the wptr, this causes the engine to "
"start fetching and processing packets. As the engine processes packets, the "
"rptr gets updates until the rptr catches up to the wptr and they are equal "
"again."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:25
msgid ""
"Usually, ring buffers in the driver have a limited size (search for "
"occurrences of `amdgpu_ring_init()`). One of the reasons for the small ring "
"buffer size is that CP (Command Processor) is capable of following addresses "
"inserted into the ring; this is illustrated in the image by the reference to "
"the IB (Indirect Buffer). The IB gives userspace the possibility to have an "
"area in memory that CP can read and feed the hardware with extra "
"instructions."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:32
msgid ""
"All ASICs pre-GFX11 use what is called a kernel queue, which means the ring "
"is allocated in kernel space and has some restrictions, such as not being "
"able to be :ref:`preempted directly by the scheduler<amdgpu-mes>`. GFX11 and "
"newer support kernel queues, but also provide a new mechanism named :ref:"
"`user queues<amdgpu-userq>`, where the queue is moved to the user space and "
"can be mapped and unmapped via the scheduler. In practice, both queues "
"insert user-space-generated GPU commands from different jobs into the "
"requested component ring."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:42
msgid "Enforce Isolation"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:44
msgid ""
"After reading this section, you might want to check the :ref:`Process "
"Isolation<amdgpu-process-isolation>` page for more details."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:47
msgid ""
"Before examining the Enforce Isolation mechanism in the ring buffer context, "
"it is helpful to briefly discuss how instructions from the ring buffer are "
"processed in the graphics pipeline. Letâ€™s expand on this topic by checking "
"the diagram below that illustrates the graphics pipeline:"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:54
msgid ""
"In terms of executing instructions, the GFX pipeline follows the sequence: "
"Shader Export (SX), Geometry Engine (GE), Shader Process or Input (SPI), "
"Scan Converter (SC), Primitive Assembler (PA), and cache manipulation (which "
"may vary across ASICs). Another common way to describe the pipeline is to "
"use Pixel Shader (PS), raster, and Vertex Shader (VS) to symbolize the two "
"shader stages. Now, with this pipeline in mind, let's assume that Job B "
"causes a hang issue, but Job C's instruction might already be executing, "
"leading developers to incorrectly identify Job C as the problematic one. "
"This problem can be mitigated on multiple levels; the diagram below "
"illustrates how to minimize part of this problem:"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:67
msgid ""
"Note from the diagram that there is no guarantee of order or a clear "
"separation between instructions, which is not a problem most of the time, "
"and is also good for performance. Furthermore, notice some circles between "
"jobs in the diagram that represent a **fence wait** used to avoid "
"overlapping work in the ring. At the end of the fence, a cache flush occurs, "
"ensuring that when the next job starts, it begins in a clean state and, if "
"issues arise, the developer can pinpoint the problematic process more "
"precisely."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:75
msgid ""
"To increase the level of isolation between jobs, there is the \"Enforce "
"Isolation\" method described in the picture below:"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:80
msgid ""
"As shown in the diagram, enforcing isolation introduces ordering between "
"submissions, since the access to GFX/Compute is serialized, think about it "
"as single process at a time mode for gfx/compute. Notice that this approach "
"has a significant performance impact, as it allows only one job to submit "
"commands at a time. However, this option can help pinpoint the job that "
"caused the problem. Although enforcing isolation improves the situation, it "
"does not fully resolve the issue of precisely pinpointing bad jobs, since "
"isolation might mask the problem. In summary, identifying which job caused "
"the issue may not be precise, but enforcing isolation might help with the "
"debugging."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer.rst:91
msgid "Ring Operations"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:54
msgid "Return max IBs that fit in a single submission."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:58
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:78
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:112
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:135
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:163
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:185
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:216
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:237
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:413
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:446
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:466
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:754
msgid "**Parameters**"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:60
msgid "``enum amdgpu_ring_type type``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:56
msgid "ring type for which to return the limit."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:74
msgid "allocate space on the ring buffer"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:80
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:114
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:137
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:165
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:187
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:218
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:237
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:415
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:448
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:468
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:756
msgid "``struct amdgpu_ring *ring``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:76
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:110
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:133
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:161
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:184
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:214
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:236
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:411
msgid "amdgpu_ring structure holding ring information"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:78
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:112
msgid "``unsigned int ndw``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:77
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:111
msgid "number of dwords to allocate in the ring buffer"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:79
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:113
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:136
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:164
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:186
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:216
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:243
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:413
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:450
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:468
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:754
msgid "**Description**"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:78
msgid ""
"Allocate **ndw** dwords in the ring buffer. The number of dwords should be "
"the sum of all commands written to the ring."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:81
msgid "**Return**"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:82
msgid ""
"0 on success, otherwise -ENOMEM if it tries to allocate more than the "
"maximum dword allowed for one submission."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:108
msgid "allocate space on the ring buffer for reemit"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:112
msgid ""
"Allocate **ndw** dwords in the ring buffer (all asics). doesn't check the "
"max_dw limit as we may be reemitting several submissions."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:131
msgid "insert NOP packets"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:135
msgid "``uint32_t count``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:134
msgid "the number of NOP packets to insert"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:135
msgid "This is the generic insert_nop function for rings except SDMA"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:159
msgid "pad IB with NOP packets"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:163
msgid "``struct amdgpu_ib *ib``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:162
msgid "IB to add NOP packets to"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:163
msgid "This is the generic pad_ib function for rings except SDMA"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:181
msgid "tell the GPU to execute the new commands on the ring buffer"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:185
msgid ""
"Update the wptr (write pointer) to tell the GPU to execute new commands on "
"the ring buffer (all asics)."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:212
msgid "reset the wptr"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:215
msgid "Reset the driver's copy of the wptr (all asics)."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:233
msgid "init driver ring struct."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:239
msgid "``struct amdgpu_device *adev``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:235
msgid "amdgpu_device pointer"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:238
msgid "``unsigned int max_dw``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:237
msgid "maximum number of dw for ring alloc"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:239
msgid "``struct amdgpu_irq_src *irq_src``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:238
msgid "interrupt source to use for this ring"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:240
msgid "``unsigned int irq_type``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:239
msgid "interrupt type to use for this ring"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:241
msgid "``unsigned int hw_prio``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:240
msgid "ring priority (NORMAL/HIGH)"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:242
msgid "``atomic_t *sched_score``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:241
msgid "optional score atomic shared with other schedulers"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:242
msgid ""
"Initialize the driver information for the selected ring (all asics). Returns "
"0 on success, error on failure."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:409
msgid "tear down the driver ring struct."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:412
msgid "Tear down the driver information for the selected ring (all asics)."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:442
msgid "ring helper"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:444
msgid "ring to write to"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:446
msgid "``uint32_t reg0``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:445
msgid "register to write"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:447
msgid "``uint32_t reg1``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:446
msgid "register to wait on"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:448
msgid "``uint32_t ref``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:447
msgid "reference value to write/wait on"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:449
msgid "``uint32_t mask``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:448
msgid "mask to wait on"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:449
msgid ""
"Helper for rings that don't support write and wait in a single oneshot "
"packet."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:462
msgid "try to soft recover a ring lockup"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:464
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:752
msgid "ring to try the recovery on"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:466
msgid "``unsigned int vmid``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:465
msgid "VMID we try to get going again"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:467
msgid "``struct dma_fence *fence``"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:466
msgid "timedout fence"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:467
msgid "Tries to get a ring proceeding again when it is stuck."
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:750
msgid "tests ring and set sched readiness status"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:753
msgid "Tests ring and set sched readiness status"
msgstr ""

#: ../../../gpu/amdgpu/ring-buffer:93:
#: ../drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c:755
msgid "Returns 0 on success, error on failure."
msgstr ""
